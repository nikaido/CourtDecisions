主文
  1 特許庁が不服2008-26819号事件について平成23年2月24日にした審決を取り消す。
  2 訴訟費用は被告の負担とする。

事実及び理由
第1 請求
  主文同旨
第2 事案の概要
  1 特許庁における手続の経緯
    原告は，平成13年(2001年)5月14日出願の米国特許出願第290948号及び平成14年(2002年)3月27日出願の米国特許出願第107876号に基づく優先権を主張して，同年5月13日，発明の名称を「データストリームフィルタリング装置及び方法」とする発明について国際出願をし，平成15年11月13日，日本国への国内移行手続を行った。これにより，同国際出願は，特願2002-590581号として適法に係属した(以下「本願」という。)
    原告は，平成19年10月18日付けの拒絶理由通知に対し，平成20年1月23日付けで意見書及び手続補正書を提出したが，同年7月10日付けで拒絶査定を受けた。
    原告は，平成20年10月20日に拒絶査定不服審判を請求し(不服2008-26819号)，同年11月18日付けで手続補正書を提出して特許請求の範囲を補正し，平成22年4月12日付けの審尋に対し，同年8月13日付けの回答書を提出し，同年9月29日付けの拒絶理由通知に対し，平成23年1月5日付けで意見書及び手続補正書を提出したが，特許庁は，平成23年2月24日付けで「本件審判の請求は，成り立たない」との審決をし，その謄本は，同年3月8日に原告に送達された。
  2 特許請求の範囲の請求項1の記載(本願発明)
    平成23年1月5日付け手続補正書による補正後の特許請求の範囲の請求項1には，次の記載がある。
    「各々がアドレスフィールドとフィルタタグフィールドからなるパケットであって，フィルタリングノードを有するPOＮ(Passive  Optical  Ｎetwork)を介し送信されるパケットのフィルタリング方法であって，前記POＮのフィルタリングノードにおいて：
    フィルタタグフィールドの値を保存するステップ；及び
    前記フィルタリングノード宛て以外の以降に受信したパケットを，それら各自のアドレスフィールドの値に関係なく，それら各自のフィルタタグフィールドの値と前記保存されているフィルタタグフィールドの値との比較に応じて転送するステップ；
    からなり，
    前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存されることを特徴とする方法。」
  3 審決の理由
    審決の理由は，別紙審決書写しのとおりであり，その要旨は，次のとおりである。
    (1) 結論
      本願発明は，特開平11-215146号公報(甲1。以下「引用例1」という。)記載の発明(以下「引用発明1」という。)，特開2000-32029号公報(甲2。以下「引用例2」という。)記載の発明(以下「引用発明2」という。)及び周知技術に基づいて，当業者が容易に発明をすることができたものであるから，特許法29条2項の規定により特許を受けることができない。
    (2) 認定
      ア 引用発明1
        「各々がATMヘッダとOＮU＿IDからなるATMPOＮフレームであって，OＮUを有するPOＮを介して送信されるATMセルの伝送方法であって，前記POＮのOＮUにおいて：
        OＮU＿IDを格納するステップ；及び
        受信したATMPOＮフレームを，それら各自のOＮU＿IDと前記格納されているOＮU＿IDとの比較において通過させるステップ；
        からなる方法。」
      イ 本願発明と引用発明1との一致点
        「各々が2つのフィールドを備えるデータであって，フィルタリングノードを有するPOＮを介して送信されるデータのフィルタリング方法であって，前記POＮのフィルタリングノードにおいて：
        フィールドの値を保存するステップ；及び
        受信したデータを，それら各自のフィールドの値と前記保存されているフィールドの値との比較に応じて処理するステップ；
        からなる法。」
      ウ 本願発明と引用発明1との相違点
        (ア) 相違点1
          「2つのフィールドを備えるデータ」に関し，
          本願発明は，「アドレスフィールドとフィルタタグフィールドからなるパケット」であるのに対し，
          引用発明1は，「ATMヘッダとOＮU＿IDからなるATMPOＮフレーム」である点。
        (イ) 相違点2
          「データのフィルタリング方法」に関し，
          本願発明は，「パケットのフィルタリング方法」であるのに対し，
          引用発明1は，「ATMセルの伝送方法」である点。
        (ウ) 相違点3
          「フィールドの値」に関し，
          本願発明は，「フィルタタグフィールドの値」であるのに対し，
          引用発明1は，「OＮU＿ID」である点。
        (エ) 相違点4
          「受信したデータ」に関し，
          本願発明は，「前記フィルタリングノード宛て以外の以降に」受信したものであるのに対し，
          引用発明1は，「前記フィルタリングノード宛て以外の以降に」受信したものか不明な点。
        (オ) 相違点5
          「処理するステップ」に関し，
          本願発明は，「それら各自のアドレスフィールドの値に関係なく」，「転送する」ステップであるのに対し，
          引用発明1は，「通過させる」ステップであって，「それら各自のアドレスフィールドの値に関係なく」するか不明な点。
        (カ) 相違点6
          「フィールドの値」の保存方法に関し，
          本願発明は，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」のに対し，
          引用発明1は，そのような構成を備えていない点。
第3 審決の取消事由に係る原告の主張
  審決には，相違点1，3及び5に係る判断の誤り(取消事由1)並びに相違点4及び6に係る判断の誤り(取消事由2)があり，これらの誤りは審決の結論に影響を及ぼすものであるから，審決は違法として取り消されるべきである。
  1 相違点1，3及び5に係る判断の誤り(取消事由1)
    審決の相違点1に係る判断は誤りであり，この誤った判断を前提とする相違点3及び5に係る判断も誤りである。
    (1) 相違点1に係る判断の誤り
      ア
        審決は，本願発明と引用発明1との相違点1を次のとおり認定している。
        「『2つのフィールドを備えるデータ』に関し，
        本願発明は，『アドレスフィールドとフィルタタグフィールドからなるパケット』であるのに対し，
        引用発明1は，『ATMヘッダとOＮU＿IDからなるATMPOＮフレーム』である点。」
        上記認定は，引用発明1の「ATMヘッダ」は本願発明の「アドレスフィールド」に対応し，引用発明1の「OＮU＿ID」は本願発明の「フィルタタグフィールド」に対応する，とするものであるが，この認定は誤りである。本願発明の「アドレスフィールド」に対応するのは「OＮU＿ID」であり， 本願発明の「フィルタタグフィールド」に対応するものは引用発明1にはない。
        すなわち，引用例1(甲1)の【0023】に「…宛先のOＮUを指定するOＮU＿ID(光ネットワーク装置識別情報)が記憶される。」と記載されているように，引用発明1の「OＮU＿ID」は，宛先のOＮUを指定するものである。一方，本願発明では，「第1パケット」は，「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」ることが記載されているから，本願発明の「アドレスフィールド」は，宛先の「フィルタリングノード」を指定するために用いられるものといえる。したがって，引用発明1の「OＮU＿ID」は，「フィルタタグフィールド」ではなく，本願発明の「アドレスフィールド」の値に対応するものというべきである。
      イ
        引用発明1の「ATMヘッダとOＮU＿IDからなるATMPOＮフレーム」における「ATMヘッダ」について，引用例1には，ATMPOＮフレームにおける「ATMヘッダ」をどのように使用するかの記載はなく，また，「ATMヘッダ」をフィルタタグとして使用することの記載も示唆もない。引用例1には，本願発明の「フィルタタグ」に相当するものは示唆されていないから，引用発明1の「ATMヘッダとOＮU＿IDからなるATMPOＮフレーム」を，本願発明のように「アドレスフィールドとフィルタタグフィールドからなるパケット」とすることは著しく困難である。
      ウ
        仮に，引用発明1の「OＮU＿ID」が，本願発明の「フィルタタグ」に対応するものであるとして検討すると，引用例1におけるセキュリティ確保の要請が，引用発明1の「ATMヘッダ」を本願発明の「アドレスフィールド」に置き換える阻害要因となる。
        すなわち，引用例1の【0032】に「…セルを読み出すと，暗号処理部116は，このセルに対し，…暗号処理を施す。POＮ処理部117は，この暗号処理後のセルに対し，宛先であるOＮUのOＮU＿IDを付加し，ATMPOＮフレームとして通信路118に送出する。…」と記載されているように，引用例1において，引用発明1の「ATMヘッダ」を含むATMセルは，暗号化処理が施された後にOＮU＿IDが付加され，ATMPOＮフレームとしてOＮUに送出される。このように，引用発明1の「ATMヘッダ」は，ATMPOＮフレームがOＮUに送信される際に，アドレスを指定する等の通信のための情報として使用されていないばかりか，秘密にされるべき情報である(【0010】～【0013】に記載されているように，セキュリティ確保のため)。したがって，たとえ，アドレスフィールドを備えるパケットが周知であるとしても，秘密にされるべき情報であって，ATMPOＮフレームの伝送のために使用されていない，引用発明1の「ATMヘッダ」を，本願発明の「アドレスフィールド」に置き換える動機付けは全くない。
        一方，本願発明の「アドレスフィールド」は，「第1パケット」を「前記フィルタリングノードに宛て」るために用いるものであり，各フィルタリングノードは，受信したパケットが自分宛てかどうかを知るために「アドレスフィールド」を参照するから，本願発明の「アドレスフィールド」は秘密にされるべきでない情報である。このように，引用例1におけるセキュリティ確保の要請は，引用発明1における，暗号化される情報である「ATMヘッダ」を本願発明の「アドレスフィールド」に置き換えることへの阻害要因となる。
        したがって，仮に，引用発明1の「OＮU＿ID」が，本願発明の「フィルタタグ」に対応するものであるとしも，引用発明1の「ATMヘッダとOＮU＿IDからなるATMPOＮフレーム」を，本願発明のように「アドレスフィールドとフィルタタグフィールドからなるパケット」とすることは著しく困難である。
    (2) 相違点3に係る判断の誤り
      審決は，本願発明と引用発明1との相違点3(「フィールドの値」に関し，本願発明は，「フィルタタグフィールドの値」であるのに対し，引用発明1は，「OＮU＿ID」である点。)について，次のとおり判断している。
      「引用発明1の『OＮU＿ID』は，フィルタタグということができ，フィールドの値であることは明らかであるから，本願発明のように『フィルタタグフィールドの値』と称することができることは当然のことである。」
      しかし，上記(1)のとおり，引用発明1の「OＮU＿ID」は，本願発明の「アドレスフィールド」の値に対応するものというべきである。
      したがって，審決の上記判断は誤りである。
    (3) 相違点5に係る判断の誤り
      審決は，本願発明と引用発明1との相違点5(「処理するステップ」に関し，本願発明は，「それら各自のアドレスフィールドの値に関係なく」，「転送する」ステップであるのに対し，引用発明1は，「通過させる」ステップであって，「それら各自のアドレスフィールドの値に関係なく」するか不明な点。)について，「本願発明のように『それら各自のアドレスフィールドの値に関係なく』，『転送する』ステップとすることは当業者が容易に成し得ることである。」と判断している。
      しかし，上記(1)のとおり，引用発明1の「OＮU＿ID」は，本願発明の「アドレスフィールド」の値に対応するものというべきであるから，「OＮU＿ID」は，宛先のOＮUを指定するために用いられ，ATMPOＮフレームを受信するOＮUは，必ず「OＮU＿ID」(アドレスフィールドの値)に応じて転送を行う(甲1【0046】)。よって，引用例1には，本願発明のように「アドレスフィールドの値に関係なく，…転送する」ことは記載も示唆もされていない。
      したがって，審決の上記判断は誤りである。
  2 相違点4及び6に係る判断の誤り(取消事由2)
    審決の引用発明2の認定は誤りであり，この誤った認定を前提とする相違点2及び4に係る判断は誤りである。
    (1) 引用発明2の認定の誤り
      ア
        審決は，引用例2に記載された発明(引用発明2)を次のとおり認定している。
        「バーチャルLAＮシステムに適用される複数グループ一括中継方法において，バーチャルLAＮ情報は，宛先MACアドレスフィールドを用いて，中継装置(1)に伝送され，かつ前記バーチャルLAＮ情報に設定されるバーチャルLAＮ情報フィールドを有する最初のフレームの受信に応答して登録される方法。」
        しかし，引用例2(甲2)には，「バーチャルLAＮ情報は，宛先MACアドレスフィールドを用いて，中継装置(1)に伝送され」ることは記載されていない。
        すなわち，引用例2の【0049】の記載及び【0056】から【0060】までの記載(特に【0060】)から明らかなように，引用例2の「宛先MACアドレス」とは，フレームを中継装置1に伝送する(宛てる)ための中継装置1のMACアドレスではなく，通信先の装置のMACアドレスである。
        中継装置1が，バーチャルLAＮ情報を含むフレームを受信するのは，送受信部11-1にフレームが届いたからである。フレームの宛先MACアドレスは中継装置1のMACアドレスではないのだから，フレームの宛先MACアドレスを見て，受け取るかどうかを判断しているわけではない。言い換えると，フレームの宛先MACアドレスは，フレームを中継装置1に宛てるために用いられてはいない。
        したがって，審決の上記認定は誤りである。
      イ
        被告は，引用例2の「宛先MACアドレス」が中継装置(1)のMACアドレスでなく，通信先の装置のアドレスであったとしても，「宛先MACアドレスフィールド」を「用いて」いることに変わりはなく，「宛先MACアドレスフィールド」を含むフレームは中継装置(1)に伝送され，中継装置(1)が受信することは明らかであるから，該フレームは「中継装置(1)に宛てられ」たものと言っても誤りではないと主張する。
        しかし，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」における「用いて」と「宛てられ」は，分断して解釈すべきではない。
        したがって，これらを分断して引用例2との対比検討を行うことは誤りである。
    (2) 相違点6についての判断の誤り
      審決は，相違点6(「フィールドの値」の保存方法に関し，本願発明は，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」のに対し，引用発明1は，そのような構成を備えていない点。)について，次のとおり判断している。
      「引用発明1に引用発明2を適用して，本願発明のように『前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される』ことは当業者が容易に成し得ることである。」
      しかし，上記(1)のとおり，引用発明2についての審決の「引用発明2の…『伝送され』…は，本願発明の…『宛てられ』…に…相当する」との認定は誤りであるから，引用発明1に引用発明2を適用しても，本願発明のように「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」ことに想到することは著しく困難である。
    (3) 相違点4に係る判断の誤り
      審決は，相違点4(「受信したデータ」に関し，本願発明は，「前記フィルタリングノード宛て以外の以降に」受信したものであるのに対し，引用発明1は，「前記フィルタリングノード宛て以外の以降に」受信したものか不明な点。)について，上記(2)の相違点6に係る判断に続けて，次のとおり判断している。
      「また，その際，…『中継装置(1)』(フィルタリングノード)に伝送され(宛てられ)る『最初のフレーム』(第1パケット)の受信により初期の保存設定がなされるのであるから，『受信したデータ』に関し，本願発明のように『前記フィルタリングノード宛て以外の以降に』受信したものとなることは当然のことである。」
      しかし，本願発明における「前記フィルタリングノード宛て以外の以降…転送するステップ」は，「フィルタリングノードの値を保存するステップ」の次のステップであり，「フィルタリングノードの値を保存する」に際して，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」のであるから，「前記フィルタリングノード宛て以外の以降…転送するステップ」における「前記フィルタリングノード宛て」とは，「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」たものといえるところ，引用例2には，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」ることに相当する記載がないから，引用発明2は，本願発明の「前記フィルタリングノード宛て以外の以降に受信…」を示唆していない。
      したがって，審決の上記判断は誤りである。
第4 被告の反論
  原告の主張する取消事由はいずれも理由がなく，審決に取り消されるべき違法はない。
  1 取消事由1(相違点1，3及び5に係る判断の誤り)に対し
    (1) 相違点1に係る判断について
      ア
        原告は，引用発明1の「OＮU＿ID」は，宛先のOＮUを指定するものであると主張する。
        しかしながら，引用例1の【0041】～【0044】，【0046】等の記載を参照すると，引用例1の「OＮU＿ID」は，ATMPOＮフレームが「ブロードキャストであることを示す情報」や「マルチキャストであることを示す情報」をも指定するものであり，宛先のOＮUを指定することのみに使用するものではない。
        したがって，引用発明1の「OＮU＿ID」は，宛先のOＮUを指定するものであり，本願発明の「アドレスフィールド」に対応するものであると直ちに対応付ける原告の主張は失当である。
        引用例1の【0046】～【0049】の記載及び図2を参照すれば，引用例1の「OＮU＿ID」は，OＮU＿IDフィルタ(211)において，フィルタされる標識として用いられることから，フィルタタグということができるものであって，審決が引用例1の「OＮU＿ID」を「フィルタタグフィールド」に対応付けたことに誤りはない。
        また，引用例1にも記載される「ATMヘッダ」を備えた「ATMフレーム」の構成や「アドレスフィールド」を備えたパケットの構成は周知であって，「ATMヘッダ」は「アドレスフィールド」とは異なるフォーマットであるにしても，いずれもフレームあるいはパケットの送信先を指定するために使用する領域であることから，審決が引用例1の「ATMヘッダ」を「アドレスフィールド」に対応付けたことに誤りはない。
        したがって，引用発明1において本願発明の「アドレスフィールド」に対応するのは「OＮU＿ID」であり， 本願発明の「フィルタタグフィールド」に対応するものは引用発明1にはないことを前提として，引用発明1の「ATMヘッダとOＮU＿IDからなるATMPOＮフレーム」を，本願発明のように「アドレスフィールドとフィルタタグフィールドからなるパケット」とすることは著しく困難であるとの原告の主張は失当である。
      イ
        原告は，本願発明の「アドレスフィールド」は秘密にされるべきでない情報であるので，ATMPOＮフレームの伝送のために使用されていない引用発明1にの「ATMヘッダ」を，本願発明の「アドレスフィールド」に置き換える動機付けは全くなく，引用例1におけるセキュリティ確保の要請は，引用発明1における，暗号化される情報である「ATMヘッダ」を本願発明の「アドレスフィールド」に置き換えることへの阻害要因となる旨主張する。
        しかしながら，周知の「ATMフレーム」の伝送においては，「ATMヘッダ」を含むATMフレームの暗号化処理を必ず行うというものではない。原告の上記主張は，「ATMフレーム」を暗号化処理するという特別な伝送方法に基づくものであって，暗号化処理をしない一般の伝送方法においては阻害要因の理由にならないものである。
        したがって，原告の上記主張は採用できない。
    (2) 相違点3及び5に係る判断について
      上記(1)のとおり，引用発明の「OＮU＿ID」は本願発明の「アドレスフィールド」の値に対応するとの原告の主張は失当であるから，相違点3及び5に係る原告の主張も失当である。
  2 取消事由2(相違点4及び6に係る判断の誤り)に対し
    (1) 引用発明2の認定について
      ア
        原告は，引用例2には，「宛先MACアドレスフィールド(アドレスフィールド)を用いて，中継装置(1)(フィルタリングノード)に宛てられた，バーチャルLAＮ情報(フィルタタグフィールド)を有するフレーム(第1パケット)」は記載されていないと主張する。
        しかしながら，引用例2の「宛先MACアドレス」が中継装置(1)のMACアドレスでなく，通信先の装置のアドレスであったとしても，「宛先MACアドレスフィールド」を「用いて」いることに変わりはなく，引用例2の【0056】～【0060】の記載から，「宛先MACアドレスフィールド」を含むフレームは中継装置(1)に伝送され，中継装置(1)が受信することは明らかであるから，該フレームは「中継装置(1)に宛てられ」たものと言っても誤りではない。
      イ
        原告が平成23年1月5日付け手続補正書により補正した本願特許請求の範囲の【請求項1】には，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」とのみ記載され，【請求項1】を引用する【請求項5】において，「アドレスフィールド」が「前記フィルタリングノードのアドレスを含む場合」及び「前記フィルタリングノードのアドレスを含まない場合」が存在することを特定している。したがって，【請求項1】に記載される本願発明の「アドレスフィールド」が【請求項1】に記載される「フィルタリングノードのアドレス」のみを特定するものではないことが明らかである。
        そうすると，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」る際の「アドレスフィールド」は「フィルタリングノードのアドレス」でないことも含まれることから，引用例2の「宛先MACアドレス」が，中継装置(1)のMACアドレスではなく，通信先の装置のMACアドレスであるとしても，中継装置(1)(フィルタリングノード)に「宛てられ」たという意味において，引用発明2と本願発明との間に差違はない。
        したがって，原告の上記主張は失当であり，引用例2について，審決の認定に誤りはない。
    (2) 相違点6に係る判断について
      原告は，引用発明2に係る審決の認定に誤りがあることを前提として，相違点6に係る審決の判断は誤りである旨主張する。
      しかしながら，上記(1)のとおり，引用例2に係る審決の認定に誤りはないので，審決の「引用発明2の『バーチャルLAＮ情報』，『宛先MACアドレスフィールド』，『中継装置(1)』，『伝送され』，『最初のフレーム』，及び『登録』は，本願発明の『フィルタタグフィールドの値』，『アドレスフィールド』，『フィルタリングノード』，『宛てられ』，『第1パケット』，及び『保存』にそれぞれ相当する」との判断にも誤りはない。
      したがって，相違点6に係る審決の判断に誤りはない。
    (3) 相違点4に係る判断について
      原告は，引用例2には，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」ることに相当する記載がないから，引用発明2は，本願発明の「前記フィルタリングノード宛て以外の以降に受信…」を示唆していないとして，相違点4に係る審決の判断は誤りである旨主張する。
      しかしながら，上記(1)のとおり，引用例2についての審決の認定に誤りはなく，引用例2には，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」ることに相当する記載がないという原告の主張は失当である。
      引用発明2は，「バーチャルLAＮ情報は」，「中継装置(1)に伝送され，かつ前記バーチャルLAＮ情報フィールドを有する最初のフレームの受信に応答して登録される」ものであって，登録された「バーチャルLAＮ情報」を利用して中継を行うのは，登録された以降に受信したデータであり，中継装置宛て以外のデータとなることは明らかである。
      したがって，相違点4に係る審決の判断に誤りはない。
第5 当裁判所の判断
  当裁判所は，審決の引用発明2の認定は誤りであり，この誤った認定を前提とする相違点4及び6に係る判断は誤りであって，取消事由2は理由があるものと判断する。その理由は，以下のとおりである。
  1 本願発明における「用いて，…宛てられ」の意義について
    原告は，引用例2(甲2)には，「バーチャルLAＮ情報は，宛先MACアドレスフィールドを用いて，中継装置(1)に伝送され」ることは記載されていないとして，引用発明2についての審決の認定(「…，バーチャルLAＮ情報は，宛先MACアドレスフィールドを用いて，中継装置(1)に伝送され，…」は誤りであると主張する。
    そこで，まず，本願発明の「前記フィルタリングフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，」の意義について検討すると，本願の明細書(甲3)の【0054】には，次の記載がある。
    「図5を参照するに，OＮUのMACアドレスと所望のVLAＮタグがヘッドエンドに認識されると，ヘッドエンドはこの新たなOＮUのMACアドレス宛てにフレームを送信し，ローカルトラフィックのフィルタリング及び上り方向フレームの識別を行うためのOＮUにより利用されるVLAＮタグを搬送する。MACアドレス51にアドレスされたこのような「VLAＮ通知」フレームを受信すると(50)，OＮUはVLAＮタグを読み込み，この値をローカルに記憶する(52)。」
    上記記載によれば，本願発明は，OＮUのMACアドレス宛てにフレームを送信し，ローカルトラフィックのフィルタリングを行うためのOＮUにより利用されるVLAＮタグを搬送し，OＮUは，このような「VLAＮ通知」フレームを受信するとVLAＮタグを読み込み，この値をローカルに記憶するものであることが認められる。
    そうすると，本願発明の「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，」とは，「パケット」の「アドレスフィールド」において「フィルタリングノード」を宛先に設定することにより，当該「パケット」の「フィルタタグフィールドの値」が，上記「フィルタリングノード」に宛てられることをいうものと認められる。
  2 引用発明2の認定について
    (1) 引用例2の記載(甲2)
      引用例2には，局から中継装置へのフレームの伝送に関して，次の記載がある。
      ア 「【0043】
        …図1に示したフレームの全体構成は，…宛先MACアドレス，送信元MACアドレス，バーチャルLAＮ情報，データ長，データ，および，フレームチェックシーケンス(FCS)により構成される。…」
      イ 「【0046】
        …例えば図3には，複数のネットワークＮW1，ＮW2…ＮWn(nは自然数)を中継するスイッチハブなどの中継装置1，ネットワークＮW1，ＮW2…ＮWnにそれぞれ接続される局2-1，2-2…2-nが示されている。…
        【0047】
        中継装置1は，例えば図3に示したように，送受信部11-1～11-n，ID識別／生成部12，複数ID着脱部13-1～13-n，アドレス学習部14-1～14-n，アドレス学習テーブル15，中継部16などを備えている。送受信部11-1～11-nは，それぞれ図示せぬポートを介してネットワークＮW1～ＮWnに接続され，ネットワークＮW1～ＮWn上の他の中継装置やネットワーク機器との間でフレームを送受信する。…」
      ウ 「【0050】
        …局2-nは，例えば図3に示したように，送受信部21-n，ID／識別生成部22-n，複数ID着脱部23-n，通信管理エンティティ24-nなどを備えている。送受信部21-nは，図示せぬポートを介してネットワークＮWnに接続され，ネットワークＮWn上の中継装置やネットワーク機器との間でフレームを送受信する。…」
      エ 「【0056】
        …例えば，局2-1から中継装置1へフレーム伝送する場合について説明する。局2-1では，通信管理エンティティ24-1によりフレームが準備され，そのフレームが複数ID着脱部23-1へ渡される。この複数ID着脱部23-1では，通信管理エンティティ24-1から渡されたフレーム内の宛先MACアドレスが取り出され，その宛先MACアドレスがID識別／生成部22-1へ渡される。
        【0057】
        ID識別／生成部22-1では，複数ID着脱部23-1から受け取った宛先MACアドレスに基づいて宛先となる1以上のバーチャルLAＮグループからグループビットが生成され，そのグループビットを含むバーチャルLAＮ情報が生成される。このバーチャルLAＮ情報はID識別／生成部22-1から複数ID着脱部23-1へ渡され，フレームに付与される。複数ID着脱部23-1では，バーチャルLAＮ情報が付与されたフレームが送受信部21-1へ渡され，図示せぬポートからネットワークＮAを介して中継装置1へ送信される。
        【0058】中継装置1では，ネットワークＮA上の局2-1から送信されたフレームが送受信部11-1により受信される。この送受信部11-1により受信されたフレームは複数ID着脱部13-1へ渡される。受信フレームには，すでにバーチャルLAＮ情報が付与されていることから，受信フレームはアドレス学習部14-1へ渡される。
        【0059】
        アドレス学習部14-1では，複数ID着脱部13-1から受け取ったフレームから送信元MACアドレス，ポート番号およびバーチャルLAＮ情報(バーチャルLAＮ識別子)が取り出され，アドレス学習テーブル15に対してこれらの関係が登録済みであるかの問い合わせが行われる。その結果，未登録であれば，上記関係がアドレス学習テーブル15に登録されてからフレームが中継部16へ渡され，一方，登録済みであれば，フレームはそのまま中継部16へ渡される。」
      オ 「【0060】
        中継部16では，アドレス学習部14-1から受け取ったフレームの宛先MACアドレスおよびバーチャルLAＮ情報がアドレス学習テーブル15に照らし合わされ，宛先となる1以上のバーチャルLAＮに対応するネットワークを接続するポートが判断される。中継部16では，このようにして送信フレームが判断された1以上のポートに対応する複数ID着脱部へ渡される。送信フレームを受け取った複数ID着脱部では，フレーム中のバーチャルLAＮ情報と宛先MACアドレスとがID識別／生成部12へ渡される。
        【0061】
        その結果，ID識別／生成部12において，フレームが自中継装置と同機能を持つ他の中継装置を介して伝送されると判断された場合には，フレーム中にバーチャルLAＮ情報を保持した形でフレームが送受信部へ渡される。一方，フレームが宛先に該当するポートに直接接続されるネットワーク上の局へ伝送されると判断された場合には，フレームからバーチャルLAＮ情報を除去した形でフレームが送受信部へ渡される。」
    (2) 引用例2に記載された発明
      上記(1)の記載によれば，引用例2に記載された発明においては，宛先MACアドレス，送信元MACアドレス，バーチャルLAＮ情報，データ長，データ及びフレームチェックシーケンス(FCS)により構成されるフレームが，局からこの局に接続されたネットワークを介して送信され，このネットワークがポートに接続された中継装置により，上記局から送信されたフレームが受信されること(上記(1)アないしエ)，上記局から送信されたフレームを受信した中継装置において，受信したフレームは，自中継装置と同機能を持つ他の中継装置を介して伝送されるか，フレームが宛先に該当するポートに直接接続されるネットワーク上の局へ伝送されるかが判断された上で，送受信部へ渡されること，その際，フレームが自中継装置と同機能を持つ他の中継装置を介して伝送されると判断された場合には，フレーム中にバーチャルLAＮ情報を保持した形でフレームが送受信部へ渡され，フレームが宛先に該当するポートに直接接続されるネットワーク上の局へ伝送されると判断された場合には，フレームからバーチャルLAＮ情報を除去した形でフレームが送受信部へ渡されること(上記(1)オ)が認められる。
      上記認定事実によれば，引用例2に記載された発明においては，局から送信されたフレームは，局に接続されたネットワークと，このネットワークが接続されたポートとを介して中継装置で受信され，この中継装置で中継されて，上記フレームの「宛先MACアドレス」で指定された通信先の装置に送信されること，言い換えれば，局から送信されるフレーム中の「宛先MACアドレス」は，最終の宛先となる装置のMACアドレスであり，上記フレームを上記中継装置に伝送するために用いられる上記中継装置のMACアドレスではないことが明らかである。
      そうすると，引用例2に記載されている発明は，「バーチャルLAＮ情報(本願発明の「フィルタタグフィールドの値」に相当する。)は，宛先MACアドレスフィールド(本願発明の「アドレスフィールド」に相当する。)を用いて，中継装置(1)(本願発明の「フィルタリングノード」に相当する。)に伝送され(本願発明の「宛てられ」に相当。)」るものとは認められない。
      したがって，審決の引用発明2の認定は誤りである。
  3 相違点4及び6に係る判断について
    (1) 相違点6に係る判断について
      上記2のとおり，引用発明2は，「バーチャルLAＮ情報は，宛先MACアドレスフィールドを用いて，中継装置(1)に伝送され」るものとは認められないから，引用発明1に引用発明2を適用し，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」構成(相違点6に係る構成)とすることは，当業者が容易に想到し得たものとはいえない。
      したがって，相違点6に係る審決の判断は誤りである。
    (2) 相違点4に係る判断について
      相違点4に係る審決の判断は，相違点6に係る判断を前提とするものであるから，その判断が誤りである以上，相違点4に係る判断も誤りである。
  4 被告の主張について
    (1)
      被告は，「引用例2の「宛先MACアドレス」が中継装置(1)のMACアドレスでなく，通信先の装置のアドレスであったとしても，「宛先MACアドレスフィールド」を「用いて」いることに変わりはなく，引用例2の段落【0056】～【0060】の記載から，「宛先MACアドレスフィールド」を含むフレームは中継装置(1)に伝送され，中継装置(1)が受信することは明らかであるから，該フレームは「中継装置(1)に宛てられ」たものと言っても誤りではない。」と主張する。
      しかし，上記1のとおり，本願発明の「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，」とは，「パケット」の「アドレスフィールド」において「フィルタリングノード」を宛先に設定することにより，当該「パケット」の「フィルタタグフィールドの値」が，上記「フィルタリングノード」に宛てられることをいうものである。しかるに，引用発明2においては，「フレーム」(本願発明の「パケット」に相当する。)の「宛先MACアドレスフィールド」(本願発明の「アドレスフィールド」に相当する。)で宛先に設定されているのは，最終の宛先となる装置のMACアドレスであり，「中継装置(1)」(本願発明の「フィルタリングノード」に相当する。)のMACアドレスではない。
      したがって，被告の上記主張は採用することができない。
    (2)
      ア
        被告は，平成23年1月5日付け手続補正書により補正した本願特許請求の範囲の【請求項1】には，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」とのみ記載され，【請求項1】を引用する【請求項5】において，「アドレスフィールド」が「前記フィルタリングノードのアドレスを含む場合」及び「前記フィルタリングノードのアドレスを含まない場合」が存在することを特定していることから，【請求項1】に記載される本願発明の「アドレスフィールド」が【請求項1】に記載される「フィルタリングノードのアドレス」のみを特定するものではないことが明らかであるとして，本願発明の「前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ」る際の「アドレスフィールド」は「フィルタリングノードのアドレス」でないことも含まれることから，引用例2の「宛先MACアドレス」が，中継装置(1)のMACアドレスではなく，通信先の装置のMACアドレスであるとしても，中継装置(1)(フィルタリングノード)に「宛てられ」たという意味において，引用発明2と本願発明との間に差違はないと主張する。
        しかし，被告の上記主張は，特許請求の範囲の記載の意味を正解しないものであり，採用することができない。その理由は次のとおりである。
      イ 請求項5について
        平成23年1月5日付け手続補正書による補正後の特許請求の範囲の請求項5の記載は，次のとおりである(甲17)。
        「【請求項5】
        請求項1乃至4の何れか1項記載のフィルタリング方法であって，前記転送するステップは；
        パケットのアドレスフィールドが前記フィルタリングノードのアドレスを含む場合，前記パケットのフィルタタグフィールドの値を保存するステップ；及び
        パケットのアドレスフィールドが前記フィルタリングノードのアドレスを含まない場合，前記パケットのフィルタタグフィールドと以前に保存されたフィルタタグフィールドとの比較に応じて前記パケットを転送するステップ；
        からなることを特徴とする方法。」
        請求項5は，請求項1を引用するから，請求項5に記載されている「前記転送するステップ」とは，請求項1に記載されている「前記フィルタリングノード宛て以外の以降に受信したパケットを，それら各自のアドレスフィールドの値に関係なく，それら各自のフィルタタグフィールドの値と前記保存されているフィルタタグフィールドの値との比較に応じて転送するステップ」をいうものと解される。
        したがって，請求項5においては，この「前記転送するステップ」が，「このパケットのアドレスフィールドが前記フィルタリングノードのアドレスを含む場合，前記パケットのフィルタタグフィールドの値を保存するステップ」と，「パケットのアドレスフィールドが前記フィルタリングノードのアドレスを含まない場合，前記パケットのフィルタタグフィールドと以前に保存されたフィルタタグフィールドとの比較に応じて前記パケットを転送するステップ」とからなることが特定されているものと解される。
        このことは，本願明細書(甲3)における「特定のOＮUに関連付けされたVLAＮタグ値は，OＮUのMACアドレス宛てのフレーム内に新たなタグを送信することにより，ネットワークオペレータの所望に従い変更することができる。OＮUのMACアドレス宛てのフレームはローカルユーザ宅内インタフェースで転送しないことが好ましい。」(【0058】)との記載，及び「トラフィックのスループットに実質的に影響を与えないヘッドエンドの制御の下，特定のOＮUに割り当てられたVLAＮタグは任意の時点において動的に変更されてもよい。」(【0062】)との記載によっても裏付けられる。
      ウ 請求項1について
        請求項1には，「フィルタタグフィールドの値を保存するステップ」と，「前記フィルタリングノード宛て以外の以降に受信したパケットを，それら各自のアドレスフィールドの値に関係なく，それら各自のフィルタタグフィールドの値と前記保存されているフィルタタグフィールドの値との比較に応じて転送するステップ」とからなることが記載され，その上で，「前記フィルタタグフィールドの値は，前記アドレスフィールドを用いて，前記フィルタリングノードに宛てられ，かつ前記フィルタタグフィールドの値に設定されるフィルタタグフィールドを有する第1パケットの受信に応答して保存される」と記載されている。
        このような記載ぶりからすると，「前記フィルタタグフィールドの値は，…第1パケットの受信に応答して保存される」とは，「フィルタタグフィールドの値を保存するステップ」の内容を特定したものであると解され，「前記フィルタリングノード宛て以外の以降に受信したパケットを，…転送するステップ」の内容を特定したものとは認められない。
      エ
        そうすると，請求項5において，「アドレスフィールド」が「前記フィルタリングノードのアドレスを含む場合」及び「前記フィルタリングノードのアドレスを含まない場合」が存在することが特定されているのは，請求項1に記載されている「前記フィルタリングノード宛て以外の以降に受信したパケットを，…転送するステップ」において，「アドレスフィールド」が「前記フィルタリングノードのアドレスを含む場合」と「前記フィルタリングノードのアドレスを含まない場合」の二つの場合が存在することを特定したものであると解されるのであって，これを，請求項1に記載されている「フィルタタグフィールドの値を保存するステップ」において，上記二つの場合が存在することを特定したものと認めることはできない。
        以上のとおり，被告の上記主張は，特許請求の範囲の記載の意味を正解しないものであり，採用することができない。
  5 まとめ
    以上のとおりであるから，原告主張の取消事由2は理由がある。
    したがって，取消事由1について判断するまでもなく，審決は違法であり，取消しを免れない。
第6 結論
  よって，原告の請求を認容することとして，主文のとおり判決する。


事件番号: 平成23年(行ケ)10211
裁判所: 知的財産高等裁判所
裁判所部名: 知的財産高等裁判所第3部
裁判年月日: 2012-11-27
権利種別: 特許権
事件種別: 審決取消訴訟
判例ID: 082768
知財高裁判例ID: 3166
