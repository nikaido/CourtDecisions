主文
  1 原告の請求を棄却する。
  2 訴訟費用は原告の負担とする。
  3 この判決に対する上告及び上告受理申立てのための付加期間を30日と定める。

事実及び理由
第1 請求
  特許庁が不服2009-511号事件について平成23年8月19日にした審決を取り消す。
第2 争いのない事実
  1 特許庁における手続の経緯
    原告は，平成15年1月10日に出願した特願2003-4236号の一部を，平成18年1月5日に，発明の名称を「ブロック予測方法」として分割出願したところ(パリ条約による優先権主張：平成14年4月9日(KR)大韓民国)，平成19年8月31日付けで拒絶理由通知を受けたので，平成20年3月4日に手続補正書及び意見書を提出したが，同年9月29日付けで拒絶査定がなされた。
    原告は，平成21年1月5日，拒絶査定不服審判を請求し(不服2009-511号)，同年2月4日に手続補正書を提出した(以下「本件補正」という。)が，同年11月30日に前置審査報告がなされ，平成22年7月5日付けで審尋が行われ，原告は，同年9月29日付けで回答書を提出したが，特許庁は，平成23年8月19日付けで「本件審判の請求は，成り立たない。」との審決をし，その謄本は同年9月6日に原告に送達された。
  2 特許請求の範囲
    本件補正後の特許請求の範囲の記載は次のとおりである。
    【請求項1】(下線部が本件補正により付加された部分)
    「双予測ピクチャにおける現在のブロックの予測方法において，
    ダイレクトモードで，前記現在のブロックの第1および第2の動きベクトルを，第2の参照ピクチャに含まれる同一の位置にあるブロックの動きベクトルから導出するステップと，
    前記第1の動きベクトルと前記現在のブロックに対する第1の参照ピクチャとを利用して，第1の動き補償されたブロックを得るステップと，
    前記第2の動きベクトルと前記現在のブロックに対する第2の参照ピクチャとを利用して，第2の動き補償されたブロックを得るステップと，
    前記双予測ピクチャに割り当てられた第1のピクチャ順序カウンタ値，前記第1の参照ピクチャに割り当てられた第2のピクチャ順序カウンタ値及び前記第2の参照ピクチャに割り当てられた第3ピクチャ順序カウンタ値に基づいて，第1および第2の係数を計算するステップと，
    前記第1および第2の動き補償されたブロックにそれぞれ前記第1および第2の係数を適用することによって，前記現在のブロックを予測するステップと，
    有することを特徴とする予測方法。」
    【請求項2】
    「前記第1の参照ピクチャは，順方向参照ピクチャ中，前記双予測ピクチャから最も時間的距離が近い参照ピクチャである，請求項1に記載の予測方法。」
  3 審決の理由
    別紙審決書写しのとおりであり，その要点は次のとおりである。
    (1) 結論
      本件補正後の請求項1に係る発明(以下「補正後発明」という。)は，本願の出願前に頒布された刊行物である，「Improved direct mode for B pictures in TML」(ITU-Telecommunications Standardization Sector STUDY GROUP 16 Video Coding  Experts  Group(Question  15)Eleventh  Meeting:Portland,Oregon,USA,22
      August,2000,Q15-K-44)(甲11，以下「引用例1」という。)に記載された発明(以下「引用発明」という。)に基づいて，当業者が容易に発明をすることができたものであるから，特許法29条2項の規定により特許出願の際独立して特許を受けることができないものである。
      したがって，本件補正は却下すべきものであるから，本願の請求項1及び2に係る発明は，本件補正前の請求項1及び2に記載したとおりのものであるところ，このうち，請求項1に係る発明は，引用発明に基づいて，当業者が容易に発明をすることができたものであるから，特許法29条2項の規定により特許を受けることができない。
    (2) 引用発明等
      審決が上記結論を導くに当たって認定した引用発明の内容，補正後発明と引用発明との一致点及び相違点並びに相違点に係る判断の概要は，次のとおりである。
      ア 引用発明の内容
        「Bピクチャにおける現在のブロックに対する予測ブロックを計算する方法において，
        Bピクチャと周囲のピクチャの間の距離に基づいて後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ，
        Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ，
        Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ，
        TRDは，時間的に前と次の参照ピクチャの間の時間的距離とし，TRBは，現在のピクチャおよび前の参照ピクチャの間の時間的距離とし，重みとしての(TRD - TRB) / TRDおよびTRB / TRDを計算するステップ，
        PpおよびPfにそれぞれ(TRD - TRB) / TRDおよびTRB / TRDを重み付けることにより予測ブロックPを計算するステップ，
        を有する方法 」
      イ 補正後発明と引用発明との一致点
        「双予測ピクチャにおける現在のブロックの予測方法において
        ダイレクトモードで，前記現在のブロックの第1および第2の動きベクトルを，第2の参照ピクチャに含まれる動きベクトルから導出するステップ
        前記第1の動きベクトルと前記現在のブロックに対する第1の参照ピクチャとを利用して，第1の動き補償されたブロックを得るステップ，
        前記第2の動きベクトルと前記現在のブロックに対する第2の参照ピクチャとを利用して，第2の動き補償されたブロックを得るステップ，
        第1および第2の係数を計算するステップ，
        前記第1及び第2の動き補償されたブロックにそれぞれ前記第1および第2の係数を適用することによって，前記現在のブロックを予測するステップ，
        を有することを特徴とする予測方法。」
ウ 補正後発明と引用発明との相違点
  (ア) 相違点1
    「現在のブロックの第1および第2の動きベクトル」を，
    補正後発明は，「第2の参照ピクチャに含まれる同一の位置にあるブロックの動きベクトルから導出する」とするのに対し，
    引用発明は，「第2の参照ピクチャに含まれる動きベクトルから導出する」とする点。
  (イ) 相違点2
    補正後発明は，「前記双予測ピクチャに割り当てられた第1のピクチャ順序カウンタ値，前記第1の参照ピクチャに割り当てられた第2のピクチャ順序カウンタ値及び前記第2の参照ピクチャに割り当てられた第3ピクチャ順序カウンタ値に基づいて，第1および第2の係数を計算する」のに対し，
    引用発明は，「TRDは，時間的に前と次の参照ピクチャの間の時間的距離とし，TRBは，現在のピクチャおよび前の参照ピクチャの間の時間的距離とし， (TRD - TRB) / TRD(第1の係数)およびTRB / TRD(第2の係数)を計算する」点。
エ 相違点に係る判断の概要
  (ア) 相違点1の容易想到性
    ダイレクトモードにおける動きベクトルを求める必要のある引用発明において，周知のダイレクトモードにおける動きベクトルを求める方法〔周知例1(甲12)〕を採用することは当業者が普通に想起し得たことである。
    よって，相違点1に係る補正後発明の構成とすることは，当業者が容易に想到し得たことである。
  (イ) 相違点2の容易想到性
    時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算することは周知の事項である〔周知例2：特開平2-285816号公報(甲13)，周知例3：特開平2-192378号公報(甲14)〕。
    したがって，引用発明の時間的距離による係数を求めるために，周知例2，3にあるような，時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算する構成とすることは当業者が普通に想起し得たことであり，その場合に必要なピクチャ順序カウンタ値は，現在のピクチャ(双予測ピクチャ)に割り当てられたピクチャ順序カウンタ値，前の参照ピクチャ(第1の参照ピクチャ)に割り当てられたピクチャ順序カウンタ値及び次の参照ピクチャ(第2の参照ピクチャ)に割り当てられたピクチャ順序カウンタ値であることは明らかである。
    よって，引用発明において，時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算する構成とするために，相違点2に係る補正後発明の構成とすることは，当業者が容易に想到し得たことである。
第3 審決の取消事由に係る原告の主張
  審決には，①相違点2の判断の誤り(取消事由1)，②引用発明の認定ないし一致点の認定の誤り，相違点の看過(取消事由2)，③相違点1の判断の誤り(取消事由3)があり，これらの誤りは審決の結論に影響を及ぼすものであるから，審決は違法として取り消されるべきである。
  1 相違点2の判断の誤り(取消事由1)
    審決は，周知例2，3(甲13，14)を根拠として，「時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算することは周知の事項である」と認定した上で，かかる周知事項に基づいて引用発明から相違点2に係る構成を備えたものとすることは当業者が容易に想到し得たことであると判断している。
    しかし，そもそも周知例2，3から審決認定の上記周知事項を認定することはできない。また，引用発明に周知例2，3を組み合わせたとしても，相違点2に係る補正後発明の構成とすることは当業者が容易に想到し得たものとはいえない。したがって，相違点2に係る審決の判断は誤りである。
    (1) 周知事項の認定の誤り
      ア
        審決は，「ピクチャ順序カウンタ値」と「フレームの番号」(周知例2では「フレーム番号」，周知例3では「フレームナンバー」。以下，両者を併せて「フレームナンバー」ともいう。)が同じものであることを前提としているが，そもそもこの前提に誤りがある。
        補正後発明の「ピクチャ順序カウンタ値」は，ディスプレイ順序を示すものである。これに対して，フレームナンバーは，デコーディング(複合化)順にフレームに付与された番号であり，必ずしもディスプレイ順序と同じではない。フレームナンバーがデコーディング順にフレームに付与された番号であることは，甲16～20からも明らかである。
        周知例2，3においては，Iピクチャ間の距離はＮに固定され，また，重み付け予測をするBピクチャは，Iピクチャ(独立フレーム)のみを参照することができ，独立フレームでないPピクチャを参照することは記載されていない。周知例2，3においては，先行する参照ピクチャ(Fmp)と後続の参照ピクチャ(Fmq)間の距離は，フレーム番号の差(mq-mp)に対応させることができず，この代わりに，先行する参照ピクチャ(Fmp)と後続の参照ピクチャ(Fmq)間の距離は，Iピクチャ間の距離(Ｎ)を利用して求めている。この点からも，周知例2，3のフレーム番号が，ディスプレイ順序を表すものでなく，デコーディング順序を表すことは明らかである。
        このように，「ピクチャ順序カウンタ値」と「フレームの番号」とは異なるものであるから，周知例2，3から上記周知事項を認定することはできない。
      イ
        補正後発明は，3つの値(第1のピクチャ順序カウンタ値，第2のピクチャ順序カウンタ値，第3のピクチャ順序カウンタ値)を用いて第1及び第2の係数を計算している。
        これに対し，周知例2，3には，2つのフレームナンバー(周知例2では，予測されるフレーム番号と前(旧)フレーム番号，周知例3では，符号化対象フレームナンバーと過去独立フレームナンバー)を用いて計算する方法しか記載されておらず，3つの値を用いて計算することは，記載も示唆もされていない。2つの値を用いて計算することと3つの値を用いて計算することは，明確に異なるのであるから，周知例2，3をもって，補正後発明における計算方法が記載されているものと見ることはできない。
    (2) 相違点2に係る容易想到性判断の誤り
      ア
        審決は，相違点2の克服の容易想到性について，周知例2，3にあるような，時間的距離による重み付け係数をピクチャ順序カウンタ値に基づいて計算する構成とすることは当業者が普通に想起し得たことであるとして，これを出発点として理由付けを試みている。しかし，そもそも周知例2，3から審決認定の上記周知事項を認定することはできないから，これを出発点とするその後の判断も誤りである。
      イ
        仮に，フレームナンバーによって係数を計算する周知例2，3を引用発明に組み合わせてみても，それだけでは，ピクチャ順序カウンタ値に基づいて係数を計算する補正後発明になることはなく，むしろ，ピクチャ順序カウンタ値に基づいて係数を計算する補正後発明に想到するには，さらに追加の異なるステップ(計算)を経なければならない。
      ウ
        よって，引用発明から相違点2に係る補正後発明の構成とすることは当業者が容易に想到し得たことであるとする審決の判断は誤りである。
  2 引用発明の認定ないし一致点の認定の誤り，相違点の看過(取消事由2)
    (1) 引用発明の認定の誤り
      ア
        審決は，次のとおり引用発明を認定している。しかし，審決の認定は引用例1に記載されていない事項を前提とするものであり(具体的には，後記イのとおり。)，以下の下線部は，引用発明の内容には含まれない。したがって，審決の引用発明の認定は誤りである。
        「Bピクチャにおける現在のブロックに対する予測ブロックを計算する方法において，
        Bピクチャと周囲のピクチャの間の距離に基づいて後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ，
        Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ，
        Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ，
        TRDは，時間的に前と次の参照ピクチャの間の時間的距離とし，TRBは，現在のピクチャおよび前の参照ピクチャの間の時間的距離とし，重みとしての(TRD-TRB)／TRDおよびTRB／TRDを計算するステップ，
        PpおよびPfにそれぞれ(TRD-TRB)／TRDおよびTRB／TRDを重み付けることにより予測ブロックPを計算するステップ，
        を有する方法」
      イ
        審決の認定は，引用例1に記載されていない事項を前提とするものである。具体的には次のとおりである。
        (ア) 審決書10頁6～8行目
          審決は，「記載kによれば，『規則的に平均することの代わりに，この距離に基づいて，予測ブロックの計算を計るか重み付けもする』以外は，通常の『ダイレクトモード』が想定されていると解される」と認定している。
          しかし，記載kの「規則的に平均することの代わりに，この距離に基づいて，予測ブロックのスケーリングをするか計算の重み付けもする」との記載を字句どおりに解釈すると，「予測ブロックの計算」を「規則的に平均することの代わりに」，「予測ブロックの計算を」「この距離に基づいて，」「重み付けもする」と解釈できる。記載kには，「『規則的に平均することの代わりに，この距離に基づいて，予測ブロックの計算を計るか重み付けもする』以外は，通常の『ダイレクトモード』が想定されている」などとは，記載されていない。
          したがって，審決が「通常の『ダイレクトモード』が想定されていると解される」と解釈する理由はないから，審決の上記認定は誤りである。
        (イ) 審決書10頁13～16行目
          審決は，「通常の『ダイレクトモード』と同様に，『ダイレクトモード動きベクトル』を『後続するPピクチャのための動きベクトルを，そのBピクチャと周囲のピクチャの間の距離に基づいてスケーリングすることにより』得ているものと認められ」と認定している。
          しかし，上記(ア)で主張したとおり，「通常の『ダイレクトモード』が想定されていると解される」との解釈は理由がないから，かかる解釈を前提とした上記認定も理由がない。
          また，審決は，「通常の『ダイレクトモード』と同様に」と認定しているが，「通常の『ダイレクトモード』と」何が「同様に」であるか不明であり，「通常のダイレクトモード」が具体的に何を指すと解するのか，その解釈の根拠がどこにあるかも明らかにされていない。
          さらに，「ダイレクトモード」と「『ダイレクトモード動きベクトル』を『後続するPピクチャのための動きベクトルを，そのBピクチャと周囲のピクチャの間の距離に基づいてスケーリングすること』」との関係について，引用例1の記載は示されていない。
          したがって，審決の上記認定は，引用例1の記載を根拠としない誤った認定である。
        (ウ) 審決書10頁19～20行目
          審決は，「該『ダイレクトモード動きベクトル』は，該『予測ブロック』を得るために用いられることは明らかである」と認定している。
          しかし，記載kによれば，引用例1には，「ダイレクトモード動きベクトル」の「スケーリング」と，「予測ブロックの計算」のそれぞれが，「そのBピクチャと周辺ピクチャの間の距離」に基づいて行うことが記載されていると解されるが，このようにして導出された「ダイレクトモード動きベクトル」を，「予測ブロック」を得るために用いること(「ダイレクトモード動きベクトル」と「予測ブロック」との直接的な相互の依存関係)までは，引用例1には，記載されていない。
          したがって，審決の上記認定は，理由がなく，誤りである。
        (エ) 審決書10頁21～24行目
          審決は，「該『ダイレクトモード動きベクトル』は，『予測ブロックPp』および『予測ブロックPf』のそれぞれに対応した動きベクトルであると認められ，
          該『動きベクトル』をそれぞれ用いることにより，『予測ブロックPp』および『予測ブロックPf』を得ることは明らかである。」と認定している。
          しかし，上記(ア)～(ウ)で主張したとおり，「ダイレクトモード動きベクトル」と「予測ブロック」との直接的な相互の依存関係は，引用例1に記載されていない。
          また，「該『ダイレクトモード動きベクトル』は，『予測ブロックPp』および『予測ブロックPf』のそれぞれに対応した動きベクトルである」ことの根拠及び，「該『動きベクトル』をそれぞれ用いることにより，『予測ブロックPp』および『予測ブロックPf』を得ること」の根拠は，いずれも引用例1には記載されていない。
          したがって，審決の上記の認定は，上記(ア)～(ウ)の誤った認定を前提とする点で誤っており，また，引用例1の記載に基づくものでない点でも誤りである。
        (オ) 審決書10頁25～29行目
          審決は，「よって，『予測ブロックPp』および『予測ブロックPf』を得る前に，『Bピクチャと周囲のピクチャの間の距離に基づいて，後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ』が必要であり」と認定している。
          しかし，引用例1には，「Bピクチャと周囲のピクチャの間の距離に基づいて，後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップが必要」であることは記載されていない。
          したがって，審決の上記認定は，上記(ア)～(エ)の誤った認定を前提とする点で誤っており，また，引用例1の記載に基づくものでない点でも誤りである。
        (カ) 審決書10頁30～36行目
          審決は，「その後，該『Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ』と，該『Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ』により『予測ブロックPp』および『予測ブロックPf』を得るものと解される。」と認定している。
          しかし，引用例1には，「Ppに対応するダイレクトモード動きベクトルを用いて」，「前の参照ピクチャからの予測ブロックPpを得るステップ」，及び「Pfに対応するダイレクトモード動きベクトルを用いて」，「将来か後続の参照ピクチャからの予測ブロックPfを得るステップ」のいずれも記載されていない。
          したがって，審決の上記認定は，引用例1の記載に基づくものではなく，また，その前提を誤っている点でも誤りである。
    (2) 一致点の認定の誤り，相違点の看過
      審決の引用発明の認定に上記(1)の誤りがある結果，審決には，補正後発明と引用発明との一致点の認定の誤り，相違点の看過がある。
      ア 一致点の認定の誤り
        審決は，補正後発明と引用発明との一致点として次の①～③を認定しているが，誤りである。
        ①  「Bピクチャと周囲のピクチャの間の距離に基づいて，後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ」
        ②  「Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ」
        ③  「Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ」
      イ 相違点の看過
        審決は，次の①～③が補正後発明と引用発明との相違点であることを看過している。
        ①  相違点3
        引用例1記載の発明は，補正後発明の「ダイレクトモードで，前記現在のブロックの第1および第2の動きベクトルを，第2の参照ピクチャに含まれる同一の位置にあるブロックの動きベクトルから導出するステップ」を備えていないこと。
        ②  相違点4
        引用例1記載の発明は，補正後発明の「前記第1の動きベクトルと前記現在のブロックに対する第1の参照ピクチャとを利用して，第1の動き補償されたブロックを得るステップ」を備えていないこと。
        ③  相違点5
        引用例1記載の発明は，補正後発明の「前記第2の動きベクトルと前記現在のブロックに対する第2の参照ピクチャとを利用して，第2の動き補償されたブロックを得るステップ」を備えていないこと。
  3 相違点1の判断の誤り(取消事由3)
    (1)
      審決は，周知例1(甲12)の記載を根拠にして，当業者は，引用発明から相違点1に係る構成に容易に想到すると判断している。しかし，本来，補正後発明と引用発明とは，相違点1を含む相違点3がそもそもの相違点であるから，仮に，周知例1の記載から審決が認定した周知事項が認められるとしても，相違点3は，周知例1の記載から当業者が容易になし得たものとはいえず，審決の判断は誤っている。
    (2)
      仮に，周知例1の記載から審決が認定した周知事項が認められるとしても，引用例1には，第2の参照ピクチャに含まれる動きベクトルを，同一の位置にあるブロックの動きベクトルとすることの示唆等は認められない。したがって，この点からも，審決のいう相違点1に係る構成に当業者が容易に想到するとはいえない。
第4 被告の反論
  1 取消事由1(相違点2の判断の誤り)に対し
    (1) はじめに
      原告は，①審決が認定した周知事項を周知例2，3から認定することはできないし，②引用発明に周知例2，3を組み合わせたとしても，相違点2に係る補正後発明の構成とすることは当業者が容易に想到し得たものとはいえないとして，審決の相違点2に係る判断は誤りであると主張する。しかし，原告の上記主張はいずれも理由がない。
    (2) 周知事項の認定に誤りはないこと
      ア
        原告は，審決の周知事項の認定に誤りがあることの根拠として，①周知例2，3における「フレーム番号」は補正後発明の「ピクチャ順序カウンタ値」とは異なるものであること，②係数の計算方法として，周知例2，3には，2つのフレーム番号を用いた方法しか記載されておらず，補正後発明のように3つの値を用いて計算する方法は記載も示唆もされていないことを主張する。
      イ ②の点について
        審決は，3つの値を用いて係数を計算することが周知であるとしているのではないから，②は，周知事項の認定に誤りがあることの根拠にはなり得ない。
      ウ ①の点について
        (ア) 「ピクチャ順序カウンタ値」について
          補正後発明でいう「ピクチャ順序カウンタ値」とは，「ピクチャのディスプレー順序を示す情報としてのピクチャの順番値(1，2，3…)をいうものと解される。
          原告は，甲第19号証及び第20号証を提出し，「ピクチャ順序カウンタ値」がパラメータとしてのPOCを意味するものとして限定して解釈しているが，本願明細書にはその旨の記載はない。「ピクチャ順序カウンタ値」は，上記のとおり解されるべきものであり，原告が主張するように限定解釈することはできない。
        (イ) 「フレーム番号」ないし「フレームナンバー」について
          周知例2の「フレーム番号」は，動画像を構成する時間的に連続して入力される各フレーム画像に対応して順に1づつ増加するように各フレーム番号に割り当てられたものであり，「フレーム画像のディスプレイ順序を示す情報としてのフレーム画像の順番値」といい得るものであり，符号／復号されるフレーム順の番号とは異なる番号である(甲13の3頁左上欄12行～右下欄16行，4頁左上欄10～13行，4頁右下欄7～16行，5頁右上欄8～20行，第3図)。
          周知例3の「フレームナンバー」も，周知例2の「フレーム番号」とほぼ同じ技術である(甲14の3頁左上14行～左下欄20行，第6図，5頁左上欄1行～右上欄2行，第7図)。
          そうすると，周知例2の「フレーム番号」及び周知例3の「フレームナンバー」は，いずれも，「ピクチャのディスプレー順序を示す情報としてのピクチャの順番値(1，2，3…)」をいうものと解される。
      エ
        したがって，周知例2，3から，審決認定の周知事項(「時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算する手法」)を認定することができる。
    (3) 相違点2に係る容易想到性判断に誤りはないこと
      ア
        原告は，審決の周知事項の認定に誤りがあることを前提として，相違点2に係る容易想到性判断に誤りがあると主張する。しかし，前記(2)のとおり，審決の周知事項の認定に誤りはない。したがって，原告の主張は，その前提を欠き，失当である。
      イ
        原告は，周知例2，3には，2つのフレームナンバーを用いた方法しか記載されていないことを前提として，3つの値を用いて計算する補正後発明の計算方法が周知例2，3に記載されていると見ることはできないと主張する。しかし，周知例2，3には，「時間的距離による重み付け係数」の基本的な計算手法として，補正後発明でいう「ピクチャ順序カウンタ値」といい得る「フレーム番号」(1，2，3，…m…)に基づいて計算するという手法の技術思想が開示されており，基本的手法として3つの「フレーム番号」に基づいて計算する手法が開示されているものと認められる。したがって，原告の主張は，その前提を欠き，失当である。
      ウ
        原告は，引用発明に周知例2，3を組み合わせても，組み合わせただけでは補正後発明にならない旨主張する。
        しかし，引用発明の，時間的距離による重み付け係数である，「(TRD - TRB) / TRD(第1の係数)およびTRB / TRD(第2の係数)」を計算する手法が，審決認定の周知事項として知られているのであるから，これをそのまま，引用発明の第1の係数および第2の係数の計算に用いる動機付けがあるといえ，引用発明にそのように当該周知事項を用いて相違点2の克服をすることは，当業者が容易になし得たことである。
        したがって，審決の容易想到性判断に誤りはない。
    (4) まとめ
      以上のとおりであるから，原告が主張する取消事由1(相違点2の判断の誤り)には理由がない。
  2 取消事由2(引用発明の認定ないし一致点の認定の誤り，相違点の看過)に対し
    (1) 引用発明の認定に誤りはないこと
      ア
        審決は，引用発明について，次の3つのステップ，すなわち，①「Bピクチャと周囲のピクチャの間の距離に基づいて後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ」，②「Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ」，③「Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ」の3つのステップを有するものとして認定している(以下「ステップ①」のようにいう。)。
        これに対し，原告は，ステップ①～③は引用発明の内容には含まれていないと主張し，その根拠として，審決の認定事項6点を挙げ，これらの点は引用例1に記載されていないと主張する(前記第3の2(1)イの(ア)ないし(カ))。原告の上記主張は，詰まるところ次の2点，すなわち，①引用例1には，「ダイレクトモード動きベクトル」を，「予測ブロック」を得るために用いることは記載されていないこと，②引用例1には， 審決でいう「通常の『ダイレクトモード』」がいかなるものか記載がなく不明であること，の2点をいうものである。
      イ
        しかし，原告の上記主張は失当である。まず，引用発明の認定は，引用例に明示的に記載されている事項だけではなく，引用例に接した当業者が，出願当時(優先日)の技術思想・技術水準に基づき引用例の記載からまとまりのある技術思想として当然把握すべき発明ないし技術的事項を認定するものである。したがって，原告が指摘する上記2点が引用例1に明示的に記載されていないというだけで，審決の引用発明の認定が誤りであるということはできない。そして，引用例1に接した当業者は，本件出願当時(優先時)の技術思想・技術水準に基づいて，引用例1の記載からまとまりのある技術思想として，ステップ①ないし③を有する発明を当然把握する。このことは，次のとおり，動画の予測符号化における基礎的技術用語・技術常識に照らして明らかであり，また，ダイレクトモードが周知の技術常識であることからもいえることである。
      ウ
        まず，動画の予測符号化における基礎的技術用語・技術常識に照らすと，次のとおりである。
        引用例1(甲11)は，Bピクチャのための改善されたダイレクトモードにつき，ダイレクトモードでコード化されたマクロブロックの予測ブロックPを計算する方法として，既存の標準で使用されてきた，規則的に平均するという方法に代えて，そのBピクチャと周辺ピクチャの間の距離に基づいてスケーリングする方法，すなわち，P＝(Pp＊(TRD-TRB)＋Pf＊(TRB))／TRDで計算する方法を提案するものである。したがって，「改善の対象とされた『ダイレクトモード』」が，「マクロブロックの予測ブロックP」を，「前の参照ピクチャからの予測ブロック」である「Pp」と「将来か後続の参照ピクチャからの予測ブロック」である「Pf」を「規則的に平均」して計算する方法を用いる「ダイレクトモード」を意味することは明らかであり，審決は，これを「通常の『ダイレクトモード』」と呼んでいる。
        また，引用例1の「ダイレクトモード」は，改善前でも改善後でも，「Bピクチャ」用のものであることは明らかであるところ，一般に，動画の予測符号化技術において，「Bピクチャ」という技術用語は，前に復号された画素値を保持する過去参照画像及び／又は未来参照画像に対する変位を与える「動きベクトル」を予測に用いて符号化する画像を意味する用語として用いられ，ここでいう「動きベクトル」とは，「現在の画像の座標から参照画像の座標への変位を与える動き補償用2次元ベクトル」をいう。これらは，技術常識である(乙1～6)。
        かかる技術常識に照らして引用例1に記載された「ダイレクトモード」の「Bピクチャ」を見れば，「マクロブロックの予測ブロックPを計算する」ために必要とされる「予測ブロックPp」及び「予測ブロックPf」を得るためには，それぞれに対応した2つの動きベクトルを得るステップが必要であることは明らかである。言い換えれば，「予測ブロックPp」及び「予測ブロックPf」にそれぞれ対応する動きベクトルを得るステップが存在しなければ，「予測ブロックPp」及び「予測ブロックPf」を得ることはできない。
        したがって，原告の主張，すなわち，「ダイレクトモード動きベクトル」の存在を認めながら，「『ダイレクトモード動きベクトル』を，『予測ブロック』を得るために用いることは記載されていない」から認定できないという原告の主張は失当である。
      エ
        また，引用例1に記載された，改善前の，Bピクチャのための「ダイレクトモード」(審決でいう「通常の『ダイレクトモード』」)の技術は，周知技術であり(乙6～13)，引用例1記載の「H．263＋」のダイレクトモードも周知技術である。
      オ
        したがって，引用例1に接した当業者が，「ダイレクトモード動きベクトル」が「予測ブロック」を得るために用いるものであり， 審決でいう「通常の『ダイレクトモード』(改善の対象とされたダイレクトモード)」が，「マクロブロックの予測ブロックP」を「前の参照ピクチャからの予測ブロック」である「Pp」と「将来か後続の参照ピクチャからの予測ブロック」である「Pf」を「規則的に平均」して計算する方法を用いる「ダイレクトモード」をいうものと理解することは明らかである。
        原告の上記指摘(①引用例1には，「ダイレクトモード動きベクトル」を，「予測ブロック」を得るために用いることは記載されていないこと，②引用例1には，
        審決でいう「通常の『ダイレクトモード』」がいかなるものか記載がなく不明であること)はいずれも失当であり，ステップ①ないし③が引用発明の内容に含まれていないとの原告の主張は理由がない。
    (2) 一致点の認定の誤り，相違点の看過はないこと
      上記(1)のとおり，審決の引用発明の認定に誤りはないから，引用発明の認定に誤りがあることを前提として一致点の認定の誤り，相違点の看過をいう原告の主張は，その前提において失当である。
    (3) まとめ
      以上のとおりであるから，原告が主張する「取消事由2」には理由がない。
  3 取消事由3(相違点1の判断の誤り)に対し
    (1)
      原告は，補正後発明と引用発明とは，相違点1を含む相違点3が相違点であるとして，仮に，周知例1の記載から審決が周知事項と認定した事項が認められるとしても，相違点3は，周知例1の記載から当業者が容易になし得たものとはいえないと主張する。しかし，前記2(2)で述べたとおり，審決に相違点の看過はない。したがって，原告の上記主張は，その前提において失当である。
    (2)
      原告は，仮に，周知例1の記載から審決が周知事項と認定した事項が認められるとしても，引用例1には，第2の参照ピクチャに含まれる動きベクトルを，同一の位置にあるブロックの動きベクトルとすることの示唆等は認められないから，審決のいう相違点1に係る構成に当業者が容易に想到し得たということはできないと主張する。
      しかし，引用発明において，「Bピクチャにおける現在のブロックに対する予測ブロックを計算する」ために「後続するPピクチャのための動きベクトル」を特定する必要があることは明らかであり，その「後続するPピクチャ」(「第2の参照ピクチャ」)には，ブロック位置に応じて，そのピクチャを予測するのに用いる異なる多数の動きベクトルが存在し，その中で，どの位置の特定の動きベクトルをスケーリング(内分)する対象のものとするかを特定することが必須であることも明らかである。
      このように，「後続するPピクチャのための動きベクトル」を特定する必要性があるという課題は，引用発明に内在しており，その課題について，周知例1に周知の技術常識として示された，「後続するPピクチャ」に含まれる動きベクトルのうち現在のブロックと同一の位置にある動きベクトルを特定する手法を採用することに格別の困難性はない。
    (3) まとめ
      以上のとおりであるから，原告が主張する「取消事由3」には理由がない。
第5 当裁判所の判断
  1 取消事由1(相違点2の判断の誤り)について
    (1) はじめに
      審決は，周知例2，3(甲13，14)を根拠として，時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算することは周知の事項であると認定した上，引用発明において，時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算する構成とするために，相違点2に係る補正後発明とすることは，当業者が容易に想到し得たことであると判断した。
      これに対し，原告は，そもそも周知例2，3から，審決が認定した周知事項〔時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算すること〕を認定することはできないし，また，引用発明に周知例2，3を組み合わせたとしても，相違点に係る補正後発明の構成とすることは，当業者が容易に想到し得たものとはいえないとして，審決の相違点2に係る判断は誤りであると主張する。
      以下，周知事項の認定(後記(2))，相違点2に係る容易想到性判断(後記(3))の順に検討する。
    (2) 周知事項の認定について
      ア 原告の主張
        原告は，周知例2，3から，審決認定の周知事項〔時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算すること〕を認定することはできないと主張し，その理由として，①「ピクチャ順序カウンタ値」と「フレームの番号」(周知例2では「フレーム番号」，周知例3では「フレームナンバー」)とは異なるものであるのに，審決は両者が同じものであることを前提としていること，②補正後発明は3つの値を用いて第1及び第2の係数を計算しているのに対し，周知例2，3には，2つのフレームの番号を用いて係数を計算する方法しか記載されておらず，周知例2，3に補正後発明における計算方法が記載されているものと見ることはできないことを主張する。
        しかし，②については，審決は，3つの値を用いて係数を計算することを周知事項として認定しているものではないから，②は，周知事項の認定が誤りであることの理由とはならない。
        そこで，以下では，①について，周知例2，3の記載事項を検討した上(後記イ，ウ)，周知例2，3から認定できる周知事項についての判断を示す(後記エ)。
      イ 周知例2(甲13)の記載事項
        (ア)
          周知例2には，次の記載がある。
          「(産業上の利用分野)
          本発明はディジタル信号の信号処理を行なう記録，伝送機器，その他の表示装置などの各種機器において，動画像信号をより少ない符号量で効率的に符号化する高能率符号化方式のうち，特に動画像信号に対し適応的に処理を行なう適応型フレーム間予測符号化方式に関する。」(1頁右下欄・3行～9行)
          「通常の再生に対して時間的に逆順で再生する逆転再生の場合，従来の前フレームによる予測では，復号のための予測値が得られず復号ができないといった問題があった。このような問題を解決する手段として，ランダムアクセスやサーチのために独立フレームが定期的に存在することを積極的に利用し，その間のフレームについては前後(新旧)両方の独立フレームより2次線形予測などで予測して符号化効率を上げる方法が先に本発明人により発明され，特許出願されている」(2頁右上欄19行～同頁左下欄9行)
          「(作用)
          上記した構成の適応型フレーム間予測符号化方式においては，連続して入力される画像信号の連続フレームの中からフレーム間予測を用いないでフレーム内で独立に符号化する独立フレームを予め一定間隔(数フレーム)おきに設定し，その間のフレーム(非独立フレーム)については前後(新旧)の両独立フレームによる予測信号(2次線形予測値)を，各非独立フレームでのブロック単位の信号の変化に応じて最も予測効率の高い予測信号を得る混合比で適応的に混合し，ブロック単位の信号を予測して符号化する。そして，予測信号の混合は，混合比の異なる何種類かの予測を実際に行ない，各予測誤差(残差)のブロック二乗誤差を求め，その最も少ない混合比で行なう。どの予測が行なわれたかの予測モード情報は，数ブロックでまとめて可変長符号化し復号側に伝送する。」(3頁右上欄9行～左下欄6行，第3図)
          「ここで，(Ｎ-1)フレームメモリ3［Ｎは2以上の整数］は，予測に使われる独立フレームの符号化が済んでから非独立フレームを符号化するためのものである。」(4頁左上欄10行～13行)
          「次に，予測フレームにおける処理であるが，切換えスイッチ2，5はb側に接続され，入力された信号は，まず(Ｎ-1)フレームメモリ3に導かれる。ここで，予測フレームは，その予測に必要な独立フレームを先に符号化するために，(Ｎ-1)フレーム分だけ遅延させられる。・・」(4頁右下欄7行～16行)
          「2次線形予測信号は，予測されるフレームと予測に使われる独立フレームの時間関係により，次式で決まる。
          X＝αVmq  ＋(1-α)Vmp     α＝(m-mp)／Ｎ  ［0≦α≦1］
          但し，Xは予測信号，Vmqは後(新)フレーム値，Vmpは前(旧)フレーム値，mは予測されるフレームの番号，mqは後(新)フレーム番号，mpは前(旧)フレーム番号である。
          第2図で，前(旧)フレームと後(新)フレームの値に係数掛け算器33，35でそれぞれ重み付け係数αおよび(1-α)を乗じ，加算器34で加算し，予測信号Xを得る。」(5頁右上欄8～20行)
(イ) 
  上記記載によれば，周知例2には，フレーム内で独立に符号化する独立フレームを一定間隔ごとに設定するとともに，独立フレーム間の非独立フレームの予測信号をその前の独立フレームとその後の独立フレームにより「時間関係」により決定される重み付け係数を用いて形成すること，ここでの「前」「後」が通常再生における再生の順序における「前」「後」であり，「時間関係」もこのような再生の順序に基づくものであること，独立フレーム及び非独立フレームの番号である「フレームの番号」の差を整数Ｎで除することによって重み付け係数αを与えること，以上の点が記載されているものと認められる。
  そうすると，周知例2には，再生の順序に基づく時間関係により決定される重み付け係数を，周知例2の「フレームの番号」の差を独立フレームが設定された間隔に対応する整数Ｎで除することによって与えることが記載されているものと認められる。
  ウ 周知例3(甲14)の記載事項
(ア) 
  周知例3には，次の記載がある。
  「(産業上の利用分野)
  本発明はディジタル信号の信号処理を行なう記録，伝送機器，その他の表示装置などの各種機器において，動画像信号をより少ない符号量で効率的に符号化する高能率符号化方式のうち，特にフレーム間予測符号化方式に関する。」(1頁左下欄17行～右下欄2行)
  「一方，通常の再生に対して時間的に逆順で再生する逆転再生の場合，従来の前フレームによる予測では復号のための予測信号が得られないために復号ができない。
  また，前フレームからの予測は時間軸における片側方向からの予測になり，予測効率の点からも十分ではなく，特にシーンチェンジなど画像が大きく変化した場合には適切な予測ができない。」(2頁右下欄17行～3頁左上欄4行)
  「(課題を解決するための手段)
  本発明は上記の目的を達成するために，連続して入力される画像信号の連続フレームの中から一定間隔(数フレーム)おきに独立フレームを設定し，この独立フレームをフレーム内で独立に符号化する第1の符号化手段と，前記独立フレームの間の非独立フレームの予測信号を，前後の独立フレームの信号をもとに形成する予測信号形成手段と，前記非独立フレームの信号を，それに対応する前記予測信号をもとに予測し，その予測誤差について符号化する第2の符号化手段とを備えたことを特徴とするフレーム間予測符号化方式を提供するものである。」(3頁左上欄14行～右上欄6行)
  「第1図および第2図においては，予測に使われる独立フレームの符号化が済んでから非独立フレームを符号化するための(Ｎ-1)フレームメモリ31［Ｎは2以上の整数］を持つ。」(3頁下欄17行～20行)
  「一方，残りの非独立フレームはフレーム間予測されるので，予測信号を減算するが，本発明方式では独立フレームを先に符号化しておく必要があるので，残りのフレームについてその分遅延させる。ここで，独立とするフレームをＮフレームに1フレーム［Ｎは2以上の整数］とすると，その遅延量(Ｎ-1)フレーム分となる。」(4頁右上欄2～9行)
  「この再生フレーム信号は，次の独立フレームの信号が供給されるまで保持され，予測処理のために(Ｎ-1)回繰り返して出力される。
  予測信号は，この二つの再生フレーム信号に係数掛け算器34，35により重み付け係数αおよび(1-α)が掛けられ，加算機36で加算されることにより得られる。
  ここで，重み付け係数は，符号化されるため予測信号減算器2に入力されるフレームと，予測に使われるフレームの時間関係により決められる。最も一般的と考えられる手法は，2次線形予測による方法で，次式により与えられる。
  α＝(m-mp)／Ｎ
  ただし，mは符号化対象フレームナンバー(1，2，3，…)，mpは過去独立フレームナンバー(0，Ｎ，2Ｎ，…)で，m＞mpであり，Ｎは2以上の整数である。
  このようにして作られる予測信号(予測値)の例をＮ＝4の場合について第7図に示す。これにより時間的に近い方のフレームに大きな重み付けがされ，信号がフレーム毎に線形に近い形で変化した場合に，より適切な予測値が与えられる。」(5頁左上欄1行～右上欄2行，第7図)
  周知例3の第7図には，予測される非独立フレームに対応するフレームナンバーがmf＋1，mf＋2，mf＋3であるとともに，これらの非独立フレームの直前の独立フレームに対応するフレームナンバーがmf，これらの直後の非独立フレームのフレームナンバーがmf＋4であることが図示されており，予測される非独立フレームよりも先に符号化されるこれらの非独立フレームの直後の独立フレームにこれらの非独立フレームのフレームナンバーに引き続くフレームナンバーが割り当てられることが示されている。また，第7図には，これらの非独立フレームを予測するための重み付け係数αがそれぞれ0．25，0．5，0．75であることが図示されており，重み付け係数αが前後の独立フレームのフレームナンバーとそれぞれの非独立フレームのフレームナンバーとの差に応じたものとされていることも示されている。
(イ) 
  上記記載によれば，周知例3には，再生の順序に基づく時間関係により決定される重み付け係数を，フレームナンバーの差を独立フレームが設定された間隔に対応する整数Ｎで除することによって与える旨が記載されているとともに，フレームナンバーが符号化順序ではなく表示順序により割り当てられる様子も示されていることが認められる。
  エ 周知例2，3から認定できる周知事項
    上記イ，ウで認定した周知例2，3の記載事項によれば，周知例2の「フレーム番号」及び周知例3の「フレームナンバー」は，いずれも符号化順序ではなく表示順序を示すものであり，補正後発明の「ピクチャ順序カウンタ値」に相当するものであることが優に認められる。
    このことは，仮に，フレーム番号(周知例2)ないしフレームナンバー(周知例3)が，表示順序とは異なる符号化順序を示すものであるとすると，重み付け係数は，非独立フレームとその前後の独立フレームとの再生の順序に基づく時間関係を反映しないものとなるが，そのような時間関係を反映しない重み付け係数を用いた前後の独立フレームからの二次線形予測の技術的な意義について，周知例2，3に何ら記載のないことからも明らかである。
  オ 原告の主張について
(ア) 
  原告は，補正後発明の「ピクチャ順序カウンタ値」がディスプレイ順序を示すものであるのに対し，フレームナンバーは，デコーディング(複合化)順にフレームに付与された番号であり，必ずしもディスプレイ順序と同じではないと主張し，フレームナンバーがデコーディング(複合化)順にフレームに付与された番号であることは甲第16号証ないし第20号証からも明らかであると主張する。
  しかし，甲第16号証及び第17号証に記載されているのは，デコーディング(復号)順序は必ずしもディスプレイ順序と同じではないということにすぎない。
  また，甲第18号証ないし第20号証には，フレームナンバーは，コーディング順又はデコーディング順にフレームに付与された番号である旨が記載されているが，この記載から認定できるのは，「フレームナンバー」という用語が符号化順序を反映することがあるということにとどまり，この記載から周知例2の「フレーム番号」及び周知例3の「フレームナンバー」が表示順序ではなく符号化順序を示すものであるということまでは認められない。
  したがって，原告の上記主張は理由がない。
(イ) 
  原告は，周知例2，3においては，Iピクチャ間の距離はＮに固定され，また，重み付け予測をするBピクチャは，Iピクチャ(独立フレーム)のみを参照することができ，独立フレームでないPピクチャを参照することは記載されていない，周知例2，3においては，先行する参照ピクチャ(Fmp)と後続の参照ピクチャ(Fmq)間の距離は，フレーム番号の差(mq-mp)に対応させることができず，この代わりに，先行する参照ピクチャ(Fmp)と後続の参照ピクチャ(Fmq)間の距離は，Iピクチャ間の距離(Ｎ)を利用して求めており，この点からも，周知例2，3のフレーム番号が，ディスプレイ順序を表すものでなく，デコーディング順序を表すことは明らかであると主張する。
  しかし，前示のとおり，周知例2，3におけるフレームの番号は，表示，すなわち再生の順序を示すものであって，あるフレームの表示からこの番号に隣接する番号のフレームの再生までの間隔が一定であれば，この番号の差は，表示に係るフレーム間の時間的距離に対応している。周知例2，3において，参照される独立フレーム間の距離が固定値Ｎとされているのは，蓄積系のメディアにおけるサーチのために一定の間隔で設定された独立フレームを参照フレームとして利用したことによるものであり(甲13の2頁右上欄9行から左下欄10行，甲14の2頁右下欄8行から14行，6頁左上欄3行から8行)，フレームの番号の差によってこの距離を計算することができないことによるものではない。また，周知例2，3のフレームの番号は，時間軸に沿った順序で付されており(甲14の3頁右上欄15行から左下欄8行，図6及び図7)，独立フレームのみを参照する予測方法であるということと，フレームの番号が付された順序とは，無関係である。
  したがって，原告の上記主張は理由がない。
  カ 小括
    以上によれば，周知例2，3から「時間的距離による重み付け係数をピクチャ順序カウンタ値(フレームの番号)に基づいて計算すること」が周知であるとした審決の認定に誤りはない。
    (3) 相違点2に係る容易想到性判断について
  ア
    原告は，審決の周知事項の認定に誤りがあることを前提として，相違点2に係る容易想到性判断に誤りがあると主張する。
    しかし，前記(2)のとおり，審決の周知事項の認定に誤りはない。
    したがって，審決の周知事項の認定に誤りがあることを前提とする原告の上記主張は理由がない。
  イ
    原告は，補正後発明は，3つの値(第1のピクチャ順序カウンタ値，第2のピクチャ順序カウンタ値，第3のピクチャ順序カウンタ値)を用いて第1及び第2の係数を計算しているのに対して，周知例2，3には，2つのフレームナンバーを用いて計算する方法しか記載されておらず，3つの値を用いて計算することは，記載も示唆もされていないと主張する。
    しかし，引用発明を出発点として補正後発明における「第1および第2の係数」の適用による「予測」と同様のものに想到することができるといえるためには，ピクチャ間の時間的距離をピクチャ順序カウンタ値の差として求めることが副引用例に記載された技術であるか又は周知技術であること，及び，引用発明においてこのような技術の採用が動機付けられることが認められれば足り，原告が主張するように，周知例2，3に3つの値を用いて計算することについての示唆があることは必ずしも必要ではない。
    すなわち，まず，補正後発明における「第1及び第2の係数」の適用による「予測」には，双予測ピクチャと第1の参照ピクチャの間及び双予測ピクチャと第2の参照ピクチャとの間のピクチャ順序カウンタ値の差として求められたピクチャの表示時刻の差をピクチャの時間的距離として用いた線形補完演算による予測が含まれている。言い換えれば，隣接するピクチャは，一定の時刻ごとに表示されるところ，補正後発明における予測対象である双予測ピクチャ，第1の参照ピクチャ及び第2の参照ピクチャのピクチャ順序カウンタ値は，いずれも表示順序を反映したものであることから，補正後発明における「予測」には，ピクチャ順序カウンタ値の差として求められるピクチャ間の時間的距離に応じた線形補完演算による予測が含まれているといえる。
    他方，引用発明における式中の「(TRD-TRB)」，すなわち，時間的に前と次の参照ピクチャの間の時間的距離TRDと現在のピクチャ及び前の参照ピクチャの間の時間的距離TRBとの差は，現在のピクチャと次の参照ピクチャとの間の時間的距離を示す値となる。したがって，引用発明の「(TRD-TRB)／TRD」と「TRB／TRD」という2の係数の適用による「予測」は，現在のピクチャ(補正後発明の「双予測ピクチャ」に相当する。)と次の参照ピクチャ(補正後発明の「第2の参照ピクチャ」に相当する。)との間及び現在のピクチャと前の参照ピクチャ(補正後発明の「第3の参照ピクチャ」に相当する。)との間のそれぞれの時間的距離に応じた線形補完演算による予測であるといえる。
    そうすると，引用発明を出発点として補正後発明における「第1および第2の係数」の適用による「予測」と同様のものに想到することができるといえるためには，ピクチャ間の時間的距離をピクチャ順序カウンタ値の差として求めることが副引用例に記載された技術であるか又は周知技術であること，及び，引用発明においてこのような技術の採用が動機付けられることが認められることが必要であり，かつ，それで十分である。
    したがって，原告の上記主張は，相違点2に係る容易想到性を否定する理由とはならない。
    (4)
      そして，上記(3)の観点から相違点2に係る容易想到性についてみると，ピクチャ間の時間的距離をピクチャ順序カウンタ値の差として求めることは周知技術であり，引用発明は時間的距離を計算する必要があるものであるから，時間的距離を計算する技術を採用するという動機付けは引用発明に内在する。
      したがって，引用発明から補正後発明における「第1および第2の係数」の適用による「予測」と同様のものに想到することは，当業者が容易になし得ることであるといえる。
    (5)
      よって，取消事由1に係る原告の主張は理由がない。
      2 取消事由2(引用発明の認定ないし一致点の認定の誤り，相違点の看過)について
    (1) はじめに
      審決は，引用例1(甲11)に記載されたダイレクトモードに係る技術的事項を引用発明として認定したものであるところ，後記(2)のとおり，引用例1の記載は，「Video coding for low bit rate communication,ITU-T Recommendation H.263」と題する書面(乙9，以下「H．263  version2(H．263＋)」という。)によって補完されることが予定されているものである。
      そこで，以下では，引用例1の位置づけ及びその記載内容並びに「H．263
      version2(H．263＋)」の記載内容を認定した上(後記(2))，引用例1から認定し得る発明の内容を検討し(後記(3))，審決の認定及び原告の主張について判断する(後記(4)，(5))。
    (2) 引用例1の記載内容等
  ア 引用例1の位置づけ
    審決は，引用例1〔「Improved direct mode for B pictures in TML」(ITU-Telecommunications  Standardization  Sector  STUDY  GROUP  16  Video  Coding Experts  Group  (Question 15)  Eleventh Meeting:  Portland,Oregon,USA,22
    August,2000,Q15-K-44)〕(甲11)に記載されたダイレクトモードに係る技術的事項を引用発明として認定したものである。
    証拠(甲11，乙7，9)によれば，引用例1は，「TMLにおけるBピクチャのための改善されたダイレクトモード」と題する文書であり，「国際電気通信連合(ITU)」の「電気通信標準化部門(ITU-T)」におけるデジタル動画像圧縮技術に関する標準である「H．26x」について，「電気通信標準化部門(ITU-T)」において「提案」を行うことを目的として，2000年(平成12年)8月22日から同月25日にかけて，米国オレゴン州ポートランドで開催されたITU-Tのビデオ符号化専門家グループの会合において示されたものであること，「電気通信標準化部門(ITU-T)」の「H．26x」については，「H．263version2(H．263＋)」という標準(乙9)が1998年(平成10年)2月に勧告されたこと，「H．263version2(H．263＋)」の内容は，デジタル動画像圧縮の分野の当業者にとって技術常識であることが認められる。
    引用例1には，「ダイレクトモードは，H．263＋のダイレクトモードによるBピクチャと同様に実施された。」との記載があり(審決認定の記載h。翻訳は，甲11訳文による。以下同じ。)，この記載からみて，引用例1は，上記の標準「H．263version2(H．263＋)」の内容を前提とするものであり，この記載内容と重複する内容は省略されていることが認められる。
  イ 引用例1(甲11)の記載内容
    引用例1には次の記載がある。
(ア) 記載a (表題)「TMLにおけるBピクチャのための改善されたダイレクトモード」
(イ) 記載i 「しかしながら，PBBBパターンでエンコード(符号化)する時，位置1および3のBピクチャが，周囲のP(とI)ピクチャだけでなく，位置2のBピクチャに関連した質低下を受けたことも分かった。」
(ウ) 記載j 「問題のより詳細な調査により，補間された予測は実画像コンテント(内容)とよく一致しなかったという理由だけで，不完全にコード(符号)化されたのは，ダイレクトモードでコード(符号)化された双方向予測されたマイクロブロックであった。」
(エ) 記載k 「ダイレクトモード動きベクトルが，後続するPピクチャの動きベクトルを，そのBピクチャと周辺のピクチャ間の距離に基づいてスケーリングすることにより導出される方法を考慮すると，これまでBピクチャについてすべての既存の標準で使用されてきた，規則的に平均することの代わりに，この距離に基づいて，予測ブロックのスケーリングをするか計算の重み付けもすることは自然に思われるであろう。」
(オ) 記載l 「だから，ダイレクトモードでコード化されたマクロブロックの予測ブロックPを計算するために提案された方法は，
  P＝(Pp＊(TRD-TRB)＋Pf＊(TRB))／TRD である。ここで，Ppは前の参照ピクチャからの予測ブロックで，Pfは将来か後続の参照ピクチャからの予測ブロックである。」
(カ) 記載m 「TRDは，時間的に前と次の参照ピクチャの間の時間的距離で，また，TRDは，現在のピクチャと前の参照ピクチャの間の時間的距離である。」
  ウ 「H．263version2(H．263＋)」(乙9)の記載内容
    「H．263version2(H．263＋)」には次の記載がある。
(ア) 「ダイレクト予測モード」は，Bピクチャについてのみ使用できる。それは，双方向予測モードの1つであり，・・・双方向モードは，前方及び後方予測の別々の動きベクトルを使用する。ダイレクトモードと双方向モードの両方において，予測画素値は，前方及び後方予測画素を平均することにより計算される。・・・Bピクチャにおいての前方予測は，参照レイヤにおける先行する参照ピクチャからの予測を意味する。後方予測は，参照レイヤにおける時間的に後続する参照ピクチャからの予測を意味する。(付属書O．4)
(イ) ダイレクトモード復号化されたマクロブロックでは，ベクトルの差分は伝送されない。その代わりに，MVDが常にゼロという制約下でのG．4に記述されるような仕方で，前方及び後方の動きベクトルは，時間的に続くPベクトルから直接算出される。(付属書O．5)
(ウ) 
  Bピクチャのためのベクトルは，次のように計算される。Pピクチャで使用される，半画素単位の1つのベクトル成分MVがあると想定する。Bピクチャの予測には，前方及び後方のベクトル成分MVF及びMVBの両方が必要である。これら前方及び後方のベクトル成分は，MVから得られ，最終的にMVDBで与えられるデルタ(差分)ベクトルにより強化(質向上)される。
  MVF＝(TRB×MV)／TRD＋MVD MVB＝((TRB-TRD)×MV)／TRD(MVDが0の場合)
  又は，MVB＝MVF-MV(MVDが0でない場合)(付属書G．4)
    (3) 引用例1から認定し得る発明の内容
      上記(2)で認定した引用例1及び「H．263  version2(H．263＋)」の記載内容によれば，引用例1には，次の事項が記載されているものと認められる。
  ア 改善前のダイレクトモードについて
(ア) 
  改善前のダイレクトモードにおいては，予測方法として次のaないしcのステップが行われている(以下「ステップa」のようにいう)。
        a 予測対象のBピクチャに時間的に続くPピクチャの動きベクトルMVを用いた予測対象のBピクチャの前方予測ベクトルMVFと後方予測ベクトルMVBの算出(MVF＝(TRB×MV)／TRD＋MVD，MVB＝((TRB-TRD)×MV)／TRDの各式による。)
        b 前方予測ベクトル及び後方予測ベクトルを用いた前方予測による予測画素値及び後方予測による予測画素値の算出
        c 前方予測による予測画素値及び後方予測による予測画素値を用いて，これを平均することによる，予測画素値の算出
(イ) 
  引用例1の記載kの「これまでBピクチャについてすべての既存の標準で使用されてきた，規則的に平均すること」との記載は，改善前のダイレクトモードにおいてステップcが行われることとともに，他の既存の標準においても同様にステップcが行われることを示している。
(ウ) 
  引用例1の記載kの「規則的に平均すること」との記載は，上記cが行われる前提として，ステップa及びbが行われることも示している。
  イ 改善後のダイレクトモードについて
    改善後のダイレクトモードについては，ステップcを行わないとの記載がある(記載k)一方，ステップa，bを行わないとの記載がないこと，これに記載kないしmを併せ考慮すると，引用例1は，ステップa，bを行うことを前提として，前方予測による予測画素値(前の参照ピクチャからの予測ブロックPp)及び後方予測による予測画素値(将来か後続の参照ピクチャからの予測ブロックであるPf)を用いて予測画素値(予測ブロックP)を算出するに当たって，改善前においては「規則的に平均」していたところを，改善後においては，P =(Pp＊(TRD-TRB)＋Pf＊(TRB))／TRDという式による「距離」に基づく「スケーリング」又は「重み付け」により計算するように改善したダイレクトモードを提案するものであることが認められる。
    (4) 審決の認定について
      審決は，引用例1において提案された改善後のダイレクトモードを引用発明として認定しているところ，引用発明における予測ブロックの計算方法は，3つのステップ，すなわち，ステップ①「Bピクチャと周囲のピクチャの間の距離に基づいて後続するPピクチャのための動きベクトルをスケーリングすることにより，Pp，Pfそれぞれに対応するダイレクトモード動きベクトルを得るステップ」，ステップ②「Ppに対応するダイレクトモード動きベクトルを用いて前の参照ピクチャからの予測ブロックPpを得るステップ」，ステップ③「Pfに対応するダイレクトモード動きベクトルを用いて将来か後続の参照ピクチャからの予測ブロックPfを得るステップ」を有するものであることを認定した。
      このうち，ステップ①の内容は，ステップaに相当し，ステップ②及び③の内容は，ステップbに相当するところ，上記(3)イのとおり，引用例1には，改善後のダイレクトモードとして，ステップa及びbが行われることを前提とするものが記載されている。
      したがって，引用発明が，予測ブロックを計算する方法について，ステップ①ないし③を有するものであるとした審決の認定に誤りはない。
    (5) 原告の主張について
  ア
    原告は，審決が「記載kによれば，「『規則的に平均することの代わりに，この距離に基づいて，予測ブロックの計算を計るか重み付けもする』以外は，通常の『ダイレクトモード』が想定されていると解される」と認定したことについて，記載kには，「『規則的に平均することの代わりに，この距離に基づいて，予測ブロックの計算を計るか重み付けもする』以外は，通常の『ダイレクトモード』が想定されている」などとは記載されておらず，審決の上記認定の根拠は不明であると旨主張する。
    しかし，前示のとおり，「H．263  version2(H．263＋)」の内容は技術常識であること，引用例1は，この「H．263version2(H．263＋)」によって補完されることを予定して記載されたものであり，「H．263  version2(H．263＋)」の内容と重複する事項の記載が省略されていることを踏まえれば，引用例1は，「H．263version2(H．263＋)」における「ダイレクトモード」を前提として，これを改善した「ダイレクトモード」を記載したものであり，改善後のダイレクトモードも，改善前のダイレクトモードと同様に，①(MVF＝(TRB×MV)／TRD＋MVD，MVB＝((TRB-TRD)×MV)／TRDの各式による)予測対象のBピクチャに時間的に続くPピクチャの動きベクトルMVを用いた予測対象のBピクチャの前方予測ベクトルMVF及び後方予測ベクトルMVBの算出，及び，②前方予測ベクトル及び後方予測ベクトルを用いた前方予測による予測画素値及び後方予測による予測画素値の算出を行うものであることは明らかである。
    したがって，原告の上記主張は理由がない。
  イ
    原告は，審決が「該『ダイレクトモード動きベクトル』は，該『予測ブロック』を得るために用いられることは明らかである」と認定したことについて，導出された「ダイレクトモード動きベクトル」を，「予測ブロック」を得るために用いること(「ダイレクトモード動きベクトル」と「予測ブロック」との直接的な相互の依存関係)までは引用例1に記載されていないと主張する。
    しかし，「ダイレクトモード動きベクトル」も「動きベクトル」であるところ，「動きベクトル」とは，「動き補償」を行うために用いられる2次元ベクトルを意味するものであるから(乙4の212頁，乙1の170頁)，引用例1において，導出された「ダイレクトモード動きベクトル」が「予測ブロック」を得るために用いられるものであることは明らかである。
    したがって，原告の上記主張は理由がない。
  ウ
    原告は，上記ア，イのほかにも審決の認定事項に引用例1の記載に基づかないものがあるとして縷々主張するが，いずれも，上記ア又はイと同旨をいうか，これらを前提とする主張であり，理由がない。
    (6) まとめ
      したがって，取消事由2に係る原告の主張は理由がない。
      3 取消事由3(相違点1の判断の誤り)について
    (1)
      原告は，補正後発明と引用発明とは，相違点1を含む相違点3が相違点であるとして，仮に，周知例1の記載から審決が周知事項と認定した事項が認められるとしても，相違点3は，周知例1の記載から当業者が容易になし得たものとはいえないと主張する。
      しかし，前記2のとおり，審決の引用発明の認定に誤りはなく，原告が主張する相違点3は存在しない。
      したがって，相違点3の存在を前提とする原告の上記主張は理由がない。
    (2)
      原告は，仮に，周知例1の記載から審決が周知事項と認定した事項が認められるとしても，引用例1には，第2の参照ピクチャに含まれる動きベクトルを，同一の位置にあるブロックの動きベクトルとすることの示唆等は認められないから，審決のいう相違点1に係る構成に当業者が容易に想到し得たということはできないと主張する。
      しかし，証拠(乙2・379頁，乙4・212頁，乙7の128頁，乙9・9頁，乙11・40頁，)によれば，動き補償は，「ダイレクトモード」による場合を含め，ブロック(マクロブロック)ごとに行われるものであることが認められるから，予測対象のBピクチャのブロックの前方予測ベクトルMVF及び後方予測ベクトルMVBがこれと同一位置のPピクチャのブロックの動きベクトルから導かれるものであることは明らかである。
    (3)
      したがって，取消事由3に係る原告の主張は理由がない。
第6 結論
  以上によれば，審決に取り消すべき違法はなく，原告の請求は理由がないからこれを棄却することとして，主文のとおり判決する。


事件番号: 平成23年(行ケ)10444
裁判所: 知的財産高等裁判所
裁判所部名: 知的財産高等裁判所第3部
裁判年月日: 2012-10-30
権利種別: 特許権
事件種別: 審決取消訴訟
判例ID: 082692
知財高裁判例ID: 3127
