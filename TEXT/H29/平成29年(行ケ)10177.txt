主文
  1 原告の請求を棄却する。
  2 訴訟費用は原告の負担とする。
  3 この判決に対する上告及び上告受理申立てのための付加期間を
  30日と定める。

事実及び理由
第1 請求
  特許庁が不服2015-14737号について平成29年5月16日にした審決を取り消す。
第2 事案の概要
  1 特許庁における手続の経緯
    (1)
      原告は，発明の名称を「移動ロボットのコンテキスト動作を生成するためのシステムおよび方法」とする発明について，平成22年7月12日(パリ条約による優先権主張：外国庁受理平成21年7月10日，フランス共和国)を国際出願日とする特許出願をした(特願2012-518831号。請求項の数14)。
    (2)
      原告は，平成27年4月9日付けで拒絶査定を受けたことから，同年8月6日に拒絶査定不服審判(不服2015-14737号)を請求した。また，原告は，平成28年12月27日付けで手続補正書(甲16。これによる特許請求の範囲の補正を「本件補正」という。)を提出した。
    (3)
      特許庁は，平成29年5月16日，「本件審判の請求は，成り立たない。」との別紙審決書(写し)記載の審決(以下「本件審決」という。)をし，その謄本は，同月30日，原告に送達された(なお，出訴期間として90日が附加された。)。
    (4)
      原告は，同年9月26日，本件審決を不服として，本件訴えを提起した。
  2 特許請求の範囲の記載
    本件補正による補正後の特許請求の範囲請求項1～14の記載は，以下のとおりである(以下，請求項1の発明を「本願発明」という。)。その明細書(甲7)及び図面(甲8)を併せて「本願明細書」という。
    【請求項1】
    少なくとも1台のロボット(10)の動作を，グラフィカル・インターフェースへのアクセスを有するユーザによって編集および制御するためのシステムであって，前記ロボットによって話されるテキストを編集するモジュール(20)と，前記テキストを合成するための音声合成モジュール(30)と，前記ロボットによって実行される動作のためのコマンド・タグのライブラリ(40)と，前記テキストに前記タグを挿入するためのモジュール(50)と，前記ロボットの前記動作を生成し制御するためのモジュール(60A，60B)とを含み，前記コマンド・タグは，前記動作を表現する図形的なシンボルを含み，前記システムは，前記ライブラリにおけるコマンド・タグの少なくとも一つの選択を許容するように構成されており，前記ライブラリは，話されるべき前記テキストとは別個であり，ツリー構造を有しており，前記図形的なシンボルに一致する動作であって，言葉を話すことと同時の動作の実行を開始するために，前記テキストの言葉の連鎖の中に前記タグの挿入がなされることを特徴とするシステム。
    【請求項2】
    前記コマンド・タグのいくつかは，前記テキスト中に，それぞれが動作の列の開始と終了のトリガーとなる少なくとも1つの開始セパレータと少なくとも1つの終了セパレータの間に挿入されることを特徴とする請求項1に記載の編集および制御システム。
    【請求項3】
    前記ロボットの環境を監視するためのモジュール(70)をさらに含み，前記コマンド・タグのライブラリは，前記ロボットの前記環境に依存する動作を制御するためのタグを少なくとも1つ含むことを特徴とする請求項1または2のいずれか一項に記載の編集および制御システム。
    【請求項4】
    前記コマンド・タグのライブラリは，期待される外部作用に対応する待機コマンドの群から選択される少なくとも1つのタグを含むことを特徴とする請求項1～3のいずれか一項に記載の編集および制御システム。
    【請求項5】
    コマンド・タグは，図形的なシンボル，句読記号，単語を含む群から選択されることを特徴とする請求項1～4のいずれか一項に記載の編集および制御システム。
    【請求項6】
    前記コマンド・タグのいくつかは前記テキスト中にリスト形式で挿入され，前記リストの各アイテムは，動作のグループに関連付けられたフレーズ要素に対応する請求項1～5のいずれか一項に記載の編集および制御システム。
    【請求項7】
    前記ロボットによって実行される前記動作は，前記テキストを読み上げる音声の変調と，前記テキストに付随する身振りと，信号の発生との組み合わせを含む群から選択されることを特徴とする請求項1～6のいずれか一項に記載の編集および制御システム。
    【請求項8】
    前記音声の変調は，異なる言語，声，調子，スピード，抑揚の組み合わせを含む群から選択されることを特徴とする請求項7に記載の編集および制御システム。
    【請求項9】
    前記テキストを編集するモジュールは，電子的なメッセージ伝達モジュールによって前記ロボットの前記動作を制御するためのモジュールと通信することを特徴とする請求項1～8のいずれか一項に記載の編集および制御システム。
    【請求項10】
    実際のロボット，仮想ロボット，およびコンピュータを含むグループに属する要素と対話できることを特徴とする請求項1～9のいずれか一項に記載の編集および制御システム。
    【請求項11】
    前記制御されているグループに属する前記ロボットの各々は，前記グループの各要素の少なくとも1つのコマンド・タグ特性によって決定される前記テキストの一部を実行することを特徴とする請求項10に記載の編集および制御システム。
    【請求項12】
    コマンド・タグで制御される前記動作は，ランダムな変化，周期的な変化，またはコンテキストにおける変化を含む群から選択される方法に従って変化させることができることを特徴とする請求項1～11のいずれか一項に記載の編集および制御システム。
    【請求項13】
    少なくとも1台のロボットの動作を，グラフィカル・インターフェースへのアクセスを有するユーザによって編集および制御するための方法であって，前記ロボットによって話されるテキストを編集するステップと，前記テキストを音声合成するステップと，前記ロボットによって実行される動作のコマンド・タグをライブラリから読み込むステップであって，前記コマンド・タグは，前記動作を表現する図形的なシンボルを含み，前記システムは，前記ライブラリにおけるコマンド・タグの少なくとも一つの選択を許容するように構成されており，前記ライブラリは，話されるべき前記テキストとは別個であり，ツリー構造を有しており，前記図形的なシンボルに一致する動作であって，言葉を話すことと同時の動作の実行を開始するために，前記テキストの言葉の連鎖の中に前記タグの挿入がなされることを特徴とする方法。
    【請求項14】
    動作を編集および制御する方法であって，前記コマンド・タグのいくつかは，前記テキスト中に，それぞれが動作の列の開始と終了のトリガーとなる，少なくとも1つの開始セパレータと少なくとも1つの終了セパレータの間に挿入されることを特徴とする請求項13記載の方法。
  3 本件審決の理由の要旨
    (1)
      本件審決の理由は，別紙審決書(写し)記載のとおりである。要するに，本願発明は，後記引用例1記載の発明(以下「引用発明」という。)並びに後記引用例2，3及び後記参考文献1～3により認められる周知の技術事項から当業者が容易に発明をすることができたものであるから，特許法29条2項の規定により特許を受けることができず，本願は，他の請求項について検討するまでもなく拒絶されるべきものである，というものである。
      ア 引用例1：特開2003-308142号公報(甲1)
      イ 引用例2：特開平11-327872号公報(甲2)
      ウ 引用例3：特開2002-127062号公報(甲3)
      エ 参考文献1：特開2006-23952号公報(甲4)
      オ 参考文献2：特開2004-283943号公報(甲5)
      カ 参考文献3：Dreamweaver 逆引きデザイン事典  初版  ［CS3／8／MX2004対応］(株式会社翔泳社，平成19年11月12日発行。甲18)
    (2)
      本件審決が認定した引用発明は，以下のとおりである。
      メッセージを送信するメッセージ送信端末と，前記メッセージを処理するメッセージ処理設備とを通信可能に接続し，前記メッセージ処理設備は，動作可能なロボットを有し，受信したメッセージを解析し，その解析結果に基づいて前記メッセージの内容を音声により読み上げるとともにその読上に対応させて前記ロボットの動作を制御するシステムであって，＼前記メッセージ送信端末は，前記ロボットの動作を制御するための動作制御情報を前記メッセージ中の文字列と対応付けて前記メッセージに埋め込む動作制御情報埋込手段と，前記動作制御情報埋込手段で前記動作制御情報を埋め込んだメッセージを前記メッセージ処理設備に送信するメッセージ送信手段とを有し，＼メッセージとして，電子メールを送信する場合，ユーザは，電子メールとして送信したい文章を入力し，この入力した文章に対して，動作制御情報を対応付けるべき文字列をマウス等で指定するとともに，記憶装置のなかから動作制御情報を選択し，文字列が指定され，動作制御情報が選択されると，選択された動作制御情報が指定文字列と対応付けられて作成中の電子メールに埋め込まれ，電子メールの対象文字列の先頭に開始制御タグ＜greet＞を，同対象文字列の末尾に終了制御タグ＜/greet＞を，制御タグ＜!JointAngle Data!＞よりも後方であって動作制御情報の先頭に開始制御タグ＜greet＞をそれぞれ挿入することにより動作制御情報を同対象文字列と対応付け，＼前記メッセージ処理設備は，受信したメッセージを解析するメッセージ解析手段と，前記メッセージ解析手段の解析結果に基づいて前記メッセージの内容を音声により読み上げるメッセージ読上手段と，前記メッセージ解析手段の解析結果に基づいて前記ロボットの動作を制御するロボット制御手段とを有する，＼システム。(なお，「＼」は改行部分を示す。以下同じ。)
    (3)
      本件審決は，本願発明と引用発明との一致点・相違点につき，以下のとおり認定した。
      ア 一致点
        少なくとも1台のロボットの動作を，グラフィカル・インターフェースへのアクセスを有するユーザによって編集および制御するためのシステムであって，＼テキストを編集するモジュールと，＼前記テキストを合成するための音声合成モジュールと，＼前記ロボットによって実行される動作のためのコマンド・タグのライブラリと，＼前記テキストに前記タグを挿入するためのモジュールと，＼前記ロボットの前記動作を生成し制御するためのモジュールとを含み，＼前記システムは，前記ライブラリにおけるコマンド・タグの少なくとも一つの選択を許容するように構成されており，前記ライブラリは，話されるべき前記テキストとは別個であり，言葉を話すことと同時の動作の実行を開始するために，前記テキストの言葉の連鎖の中に前記タグの挿入がなされることを特徴とするシステム。
      イ 相違点
        (ア) 相違点1
          テキストに関して，＼本願発明のテキストは，「前記ロボットによって話される」ものであるのに対して，＼引用発明のテキストは，メッセージ処理設備が有するメッセージ読上手段によって読み上げられるものである点。
        (イ) 相違点2
          コマンド・タグに関して，＼本願発明の「コマンド・タグ」は，「動作を表現する図形的なシンボルを含」み，言葉を話すことと同時の動作が，「前記図形的なシンボルに一致する動作」であるのに対して，＼引用発明の開始制御タグや終了制御タグは，図形的なシンボルを含むものではない点。
        (ウ) 相違点3
          ライブラリに関して，＼本願発明では，ライブラリが「ツリー構造を有して」いるのに対して，＼引用発明では，そのような特定はなされていない点。
  4 取消事由
    本願発明の進歩性判断の誤り
    (1) 相違点1に関する容易想到性判断の誤り
    (2) 相違点2に関する容易想到性判断の誤り
    (3) 相違点3に関する容易想到性判断の誤り
第3 当事者の主張
  〔原告の主張〕
  1 相違点1に関する容易想到性判断の誤り
    引用発明は，ユーザが作成したメッセージをメッセージ処理設備が有するメッセージ読上手段が読み上げるという他律的に動作がされるものである。これに対し，参考文献1及び2記載の発明は，あらかじめファイル等に保存しておいたコンテンツに対してロボットが自律的にアクセスし，ユーザと対話する等の行動を自律的にとるというものであり，引用発明とは全く異なる。
    また，引用例1と参考文献1及び2は，技術分野の関連性，課題の共通性，作用，機能の共通性がなく，引用発明の内容中の示唆もない。
    したがって，相違点1について，引用発明に参考文献1又は2を組み合わせることで本願発明を容易に想到し得るということはできない。
  2 相違点2に関する容易想到性判断の誤り
    本件審決は，相違点2に関し，引用発明に対して引用例2又は3を組み合わせることで本願発明を容易に想到し得るとする理由として，引用例1～3にそれぞれ記載されている「顔文字」ないし「スマイリーと呼ばれる記号列」が本願発明に係る請求項1に記載された「図形的なシンボル」と同義であることを挙げる。
    しかし，引用例1は，その記載(【0005】～【0007】，【0071】)より，電子メールに顔文字を含ませ，その顔文字によってロボットの矩体全体又は矩体に属する部分を制御することは，引用発明本来の目的が達成できないとして，明確に否定し排斥され，電子メールに動作制御情報を埋め込み，マークアップ言語形式に従ったデータ構造とすることで，本来の目的が達成され従来の問題点が解決されたとしている。このため，引用発明には，電子メール中に含まれる顔文字に従ってロボットを動作させることが記載されている他の文献を組み合わせることに阻害要因があるといえる。
    にもかかわらず，相違点2に関し，引用例1に対して当業者が引用例2又は3を組み合わせることにより，当業者が本願発明を容易に想到し得たということはできない。
  3 相違点3に関する容易想到性判断の誤り
    (1)
      本件審決は，相違点3に関し，周知技術として参考文献3を引用し，引用例1に対して参考文献3を組み合わせることで本願発明を容易に想到し得ると判断した。
    (2)
      しかし，参考文献3は，Webページを表示するためのHTML文書を編集することを目的とする点で，ロボットが話すテキストと動作を編集することを目的とする本願発明とは，技術分野及び解決課題において全く異なる。他方，引用例1と参考文献3との技術的な共通点はHTMLタグを用いるという点だけであり，参考文献3には，ロボットの動作の制御に関する示唆は何らなされていないから，これと引用例1を組み合わせることで本願発明を容易に考え得ると論理付けることはできない。
    (3)
      また，参考文献3は，HTMLタグそのものではなく，HTMLタグのカテゴリがツリー構造となっている点で，図形的なコマンド・タグそれ自体がツリー構造となっている本願発明と全く異なる。具体的には，ユーザは，タグ選択画面左のツリー構造の各カテゴリの中から所望するカテゴリを選択し，更にタグ選択画面右のボックスのカテゴリに属する候補の各HTMLタグの中から所望するHTMLタグを選択するという二度手間の作業を強いられる。その上，タグ選択画面左のボックスに示されるHTMLタグは，図形的なシンボルではなく，単なる英数字記号の羅列でしかないから，マークアップランゲージに精通しているエキスパートでないと，候補の各HTMLタグの中から適切なHTMLタグを選択してHTML文書を作成する作業を行うことはできない。
      このため，引用例1と参考文献3を結びつけることが仮に可能だとしても，参考文献3からは，HTMLタグのカテゴリを選択し，更にそのカテゴリに属する各HTMLタグの中から所望するHTMLタグを選択し，それにより電子メールの文書を編集するというシステムしか想起し得ないため，マークアップランゲージに精通しているエキスパートでないと，候補の各HTMLタグの中から適切なHTMLタグを選択して電子メールの文書を編集する作業を行うことはできない。
      他方，本願発明は，ロボットの動作を表現する図形的なシンボルであるコマンド・タグ(カテゴリではなくコマンド・タグそれ自体)がツリー構造(本願明細書図3参照)でライブラリに保存されているため，ツリー構造の各コマンド・タグの中からユーザが所望するコマンド・タグを選択し，そのコマンド・タグをテキスト中に挿入するという簡単な操作だけで(二度手間の作業を要せず)，HTML等のマークアップランゲージに精通しているエキスパートでないユーザであっても，(図形的なシンボルを選択するだけでよいので)ロボットに，テキストを話すと同時に，所望する動作をさせることができることを特徴とするものであり(本願明細書【0018】)，その点で，引用例1及び参考文献3からは予測できない有利な効果を得られる。
    (4)
      以上のとおり，相違点3に関し，引用例1に対して参考文献3を組み合わせることにより，当業者が本願発明に容易に想到し得るということはできない。
      〔被告の主張〕
  1 相違点1に関する容易想到性判断の誤りについて
    (1)
      引用例1は，「ロボットの動作を制御するシステム」(【0001】)に関する文献であるところ，本件審決がいう周知の技術事項とは，要するに，当該システムに関連する分野における当業者であれば，ロボットの動作を制御する構成においてロボットがテキストの内容を発話するように構成することは，誰もが知っているであろうということである。このような周知技術を引用発明に適用することは，引用発明と周知技術の関連性が全くないとか，両者を組み合わせることを妨げる記載があるといった事情がなければ，当業者が容易に，又は適宜になし得るといえる。
    (2)
      引用発明は，ロボットを含むとともに，メッセージの内容を音声により読み上げることを含むものであるから，引用発明と本件審決が認定した周知の技術事項との間には，技術的な関連性があるということができ，他方で，両者を組み合わせることを妨げる記載は見当たらない。かえって，引用例1にはロボットがメッセージ読上手段を有する旨の，発話の主体をロボットとすることを示唆する記載があるから(【0018】)，引用発明に上記周知技術を組み合わせる動機付けがあるといえる。
      したがって，引用発明に上記周知技術を適用することは，当業者が適宜なし得たことであるから，相違点1に係る本件審決の判断に誤りはない。
  2 相違点2に関する容易想到性判断の誤りについて
    (1) 受信したメッセージの「表示」の要否
      ア
        引用例1の記載(【0005】～【0007】)によれば，引用例1における「第1の課題」は「文章では伝わりにくい感情や雰囲気を詳細に表現すること」であり，「感情や雰囲気を詳細に表現するためには，顔文字を文章中に多数埋め込む必要があり，電子メールを他の方法で表示したときに文章がたいへん見づらいものとなるので，これに対応して，文章が見づらくなるのを防止すること」が「第2の課題」であると解される。
        また，引用例1の記載(【0071】，【0105】，【0106】)によれば，引用例1には，上記「第2の課題」を解決するために，「電子メール中の対象文字列の前後に挿入して当該対象文字列と動作制御情報とを対応付けるために用いられる開始制御タグや終了制御タグ等の制御タグとしてマークアップ言語形式の制御タグを用いること」が開示されていると解される。
      イ
        引用例1の【請求項1】においては，「前記メッセージ解析手段の解析結果に基づいて前記メッセージの内容を順次出力するメッセージ出力手段」は特定されているものの，受信したメッセージの内容を「表示する」ことは特定されておらず，また，「マークアップ言語形式の制御タグを用いること」についても特定されていない。この点を上記アの理解に照らすと，【請求項1】は，「前記動作体の動作を制御するための動作制御情報が，当該メッセージ中の文字列と対応付けられて埋め込まれており」，「当該動作制御情報に対応する文字列の出力に対応させて前記動作体を動作させる」ことにより，「第1の課題」，すなわち，「文章では伝わりにくい感情や雰囲気を詳細に表現すること」を解決しているものと理解される。
      ウ
        他方，引用例1の【0012】には，【請求項1】の説明として，「メッセージの内容の出力は，どのような形態で行ってもよく，例えば，音声，表示その他の出力形態により行うようになっていればよい。」と記載されている。ここで，例えば出力形態が「音声」であればメッセージの内容が表示されることはなく，「第2の課題」は生じないから，これを解決するための手段は不要である。すなわち，メッセージ内容の出力形態が「表示」であれば「第2の課題」はあるものの，【請求項1】はそのための解決手段は含まない発明として記載されていると理解できる。
        また，引用例1の【請求項2】の記載によれば，受信したメッセージの内容を「音声により読み上げる」ことは特定されているものの，受信したメッセージの内容を「表示する」ことは特定されておらず，「マークアップ言語形式の制御タグを用いること」についても特定されていない。この点は，【請求項2】を引用する【請求項3】～【請求項6】についても同様であり，【請求項7】において初めて，「受信したメッセージを表示すること」及び「マークアップ言語形式の制御タグを用いること」を特定する発明が記載されている(【0024】，【0025】参照)。換言すれば，引用例1の【請求項2】～【請求項6】には，受信したメッセージの内容を「表示」せず，かつ，【請求項7】の「マークアップ言語形式の制御タグを用いること」が特定されない発明が含まれている。
        そうすると，引用例1の【請求項2】～【請求項6】は，受信したメッセージを「表示」しない発明，すなわち，【請求項1】と同様に，「第2の課題」を有しない発明を包含したものであると理解することができる。
      エ
        以上より，引用例1は，「マークアップ言語形式の制御タグ」以外の制御タグを用いることを完全に排除しているということはできず，引用例1に接した当業者は，「文章では伝わりにくい感情や雰囲気を詳細に表現する」という「第1の課題」は，「動作体の動作を制御するための動作制御情報が，メッセージ中の文字列と対応付けられて埋め込まれていること」により解決することができ，受信したメッセージを「表示」する場合に生じる上記「第2の課題」は，「マークアップ言語形式の制御タグを用いること」により解決することができることを理解するとともに，電子メールのメッセージを読み上げによる音声出力のみとし，受信したメッセージを「表示」しない態様であれば，「第2の課題」は生じず，その場合には，「マークアップ言語形式の制御タグ」ではない「制御タグ」を採用し得ることを当然に理解するといえる。
        そうすると，引用例1に「第2の課題」についての記載があることを踏まえても，引用発明において，受信したメッセージを「表示」しない態様とすれば，動作制御情報に用いられる開始制御タグや終了制御タグとして，周知な技術事項に係る「図形的なシンボル」のタグを採用することに阻害要因はない。本件審決は，このような理解に基づき，引用発明を「第1の課題」を解決する発明と把握し，受信したメッセージを「表示」しない態様とする前提で，対象文字列の前後に挿入する開始制御タグや終了制御タグ等の制御タグを「図形的なシンボル」を含むものとすることは，当業者が容易に想到し得たと判断したものであり，その判断に誤りはない。
    (2) 受信したメッセージを「表示」する態様について
      ア
        仮に，引用発明において，受信したメッセージを「表示」する態様を前提としても，以下のとおり，対象文字列の前後に挿入する開始制御タグや終了制御タグ等の制御タグが「図形的なシンボル」を含むものとすることは，当業者が容易に想到し得たということができる。
      イ
        コンピュータ等において，所望の制御が行われるようにするための命令に「図形的なシンボル」を用いることは，本件審決で引用した引用例2及び3その他の文献に示されており，本願優先日前において普通に行われていた周知の技術事項である。そして，当該周知の技術事項は，命令が文字であるよりも図形的なものである方が直感的に分かりやすいことから，編集作業が容易になることや，命令を表示した際の制御内容の理解が容易になることが期待できるものである。
        他方で，「顔文字を文章中に多数埋め込む必要があり，電子メールを他の方法で表示したときに文章がたいへん見づらい」ことによる「第2の課題」は，「見づらい」か否かは程度問題であることや，前記のとおり，引用例1の【請求項1】～【請求項6】が当該課題を有しない発明を包含したものであると理解できることを考慮すると，さほど問題視しなくてよい場合もあり得る。
        そうすると，引用発明において，受信したメッセージを「表示」する態様を採用する場合に，上記周知の技術事項を適用して，対象文字列の前後に挿入する開始制御タグや終了制御タグ等の制御タグが「図形的なシンボル」を含むものとする結果，マークアップ言語形式のものでなくなり，それらが表示されるようになるとしても，上記「わかり易い」ことを重視して，制御タグが「図形的なシンボル」を含むものとするか，メッセージそのものが見づらくならないようにすることを重視して，引用発明のように制御タグが表示されないものとするかは，当業者が適宜選択することであって，前者を選択することは格別困難とはいえない。
        したがって，引用発明において，受信したメッセージを「表示」する態様を前提としても，引用例1の記載は阻害要因といえるものではなく，対象文字列の前後に挿入する開始制御タグや終了制御タグ等の制御タグが「図形的なシンボル」を含むものとすることは，当業者が容易に想到し得たことである。
  3 相違点3に関する容易想到性判断の誤りについて
    (1)
      本願明細書の記載(【0004】，【0018】，【0030】)によれば，本願発明は，コマンド・タグのライブラリをツリー構造とし，コマンド・タグのツリーを表示できるようにすることによって，ロボット制御におけるプログラミング作業を簡単化するという課題を解決するものであるといえる。ここで，プログラミング作業を簡単化するという課題は，ロボット制御のプログラミングに特有の課題ではなく，コンピュータのプログラミング一般における共通の課題である。
    (2)
      他方，参考文献3には，HTMLプログラムを作成する際に，当該HTMLプログラムの作成に用いるためのタグデータをツリー表示することが記載されている。また，本願優先日前に公知の乙4には，ロボット制御のプログラミングにおいて，データをツリー表示することが記載されており(【0001】，【0148】～【0152】，図6)，乙5には，ソースプログラムを生成するためのプログラミングにおいて，データをツリー表示することが記載されているといえる(【0001】，【0011】，図3)。
      よって，データをツリー表示することはコンピュータのプログラミングにおいて一般的に行われている周知技術であるといえる。
      そして，データをツリー表示すればデータを選択することが容易になることは明らかであり，特にコンピュータのプログラミングにおいてデータをツリー表示すれば，データの選択が容易になる結果，プログラミング作業を簡単化するという課題を解決することができることは明らかである。
    (3)
      引用発明において，「選択された動作制御情報が指定文字列と対応付けられて作成中の電子メールに埋め込まれ」，「電子メール」に「開始制御タグ」等を「挿入する」ことは，コンピュータのプログラミング作業と同種の性質を有しており，その簡単化が望ましいことは当然である。他方で，引用発明と上記周知技術との関係で，関連性が全くないとか，両者を組み合わせることを妨げる記載があるといった事情は見当たらない。
      そうすると，引用発明において，プログラミング作業を簡単化するという課題を解決するために，上記周知技術を適用してデータをツリー表示することには困難性がなく，データをツリー表示するために，記憶装置で管理されているデータをツリー構造の形式で管理するように構成することは，当業者が容易に想到し得たことである。本件審決は，これと同様の認識に基づいて判断したものであり，その判断に誤りはない。
第4 当裁判所の判断
  1 本願発明について
    (1)
      本願発明に係る特許請求の範囲の記載は，前記第2の2のとおりである。また，本願明細書には，以下の記載がある(なお，図面は別紙図表目録記載1参照)。
      ア 技術分野
        本発明は，ロボット・プログラミング・システムの分野に属する。より詳細には，本発明は，特に人間または動物の形をしたロボットが，動作し，表現し，そして関節の有無に依らず足で歩行するようなコンテキストに調和する動作の制御に関する。(【0001】)
      イ 背景技術
        ロボットは，頭，胴体，2本の腕，場合により2つの手，2本の脚，2つの足などといった外観上および機能上のある種の属性を持つとき，人間型であるとみなされる。ロボットに人のような外観と動作を与えると考えられる機能の1つは，身振りによる表現と口頭による表現との強い結びつきを確保する機能である。特に，このことを直感的に達成すれば，新しいユーザーのグループが人間型ロボットの動作プログラミングを利用することが可能となるであろう。この課題は，先行技術においては適切に解決されていない。仮想エージェントおよびアバタ―の分野では，物理作用とは独立した，機能および意図の両レベルにおけるFML(Function  Markup  Language)等や，(機能を実行する仮想文字のいくつかの部分を含む)実際の動作レベルにおけるBML(Behabior  markup  language)等といった，動作のプログラミングに特化した言語が職業的なプログラマーのみに利用され続けており，日常使用する言語で書かれたスクリプトとは一体化されていない。本発明は，先行技術における上記の制約を克服することを可能とするものである。(【0002】)
      ウ 発明が解決しようとする課題
        特に，本発明においては，ロボットによって話されるテキスト中に，その口頭表現に関連付けられる抑揚および／または動作のためのコマンドを挿入することを可能とする。前記コマンドは，たとえばグラフィカルに表現することも可能である。(【0004】)
      エ 発明の効果
        本発明により，動作のライブラリを作成し，それらをロボットが実行するシーンのスクリプトに簡単に挿入することが可能となる。さらに，その言語はインターネット上で使用されている言語に非常に近いものとなり，したがって，事前知識または訓練がなくても，非常に簡単に利用することができる。(【0018】)
      オ 発明を実施するための形態
        図3は，本発明の一実施形態を実装するために備えられたコマンド・タグのツリーの図である。さまざまなコマンド・タグが，生成される動作のタイプによってディレクトリ内にグループ化されており，それらの一部をスクリプト・エディタの傍らで見ることができる。(【0030】)
    (2) 本願発明の特徴
      本願明細書には，前記(1)のとおり，本願発明は以下の特徴を有することが記載されている。
      本願発明は，ロボット・プログラミング・システムに関し，特に人間又は動物の形をしたロボットが，動作し，表現し，足で歩行するようなコンテキストに調和する動作の制御に関する。
      ロボットに人のような外観と動作を与えると考えられる機能の1つは，身振りによる表現と口頭による表現との強い結びつきを確保する機能である。このことを直感的に達成すれば，新しいユーザーのグループが人間型ロボットの動作プログラミングを利用することが可能となるが，仮想エージェント及びアバタ―の分野では，動作のプログラミングに特化した言語が職業的なプログラマーのみに利用され続けており，日常使用する言語で書かれたスクリプトとは一体化されていない。
      本願発明は，先行技術における上記の制約を克服し，ロボットによって話されるテキスト中に，その口頭表現に関連付けられる抑揚及び／又は動作のためのコマンドを挿入することを可能とするものである(【0001】～【0004】)。
      本願発明により，動作のライブラリを作成し，それらをロボットが実行するシーンのスクリプトに簡単に挿入することが可能となる。さらに，その言語はインターネット上で使用されている言語に非常に近いものとなり，事前知識又は訓練がなくても，非常に簡単に利用することができる(【0018】)。
  2 引用例の記載等
    (1) 引用例1の記載
      引用例1には，以下の記載があり(なお，図面は別紙図表目録記載2参照)，引用発明が本件審決の前記認定(第2の3(2))のとおりであることは，当事者間に争いがない。
      ア 請求項
        (ア) 物理的又は仮想的に動作可能な動作体を備え，与えられたメッセージを解析し，その解析結果に基づいて前記メッセージの内容を順次出力するとともにその出力に対応させて前記動作体の動作を制御するシステムであって，＼前記メッセージには，前記動作体の動作を制御するための動作制御情報が，当該メッセージ中の文字列と対応付けられて埋め込まれており，＼前記メッセージを解析するメッセージ解析手段と，前記メッセージ解析手段の解析結果に基づいて前記メッセージの内容を順次出力するメッセージ出力手段と，前記メッセージ解析手段の解析結果に基づいて前記動作体の動作を制御する動作体制御手段とを備え，＼前記動作体制御手段は，前記メッセージに含まれる動作制御情報に基づいて，当該動作制御情報に対応する文字列の出力に対応させて前記動作体を動作させるようになっていることを特徴とするメッセージ処理システム。(【請求項1】)
        (イ) メッセージを送信するメッセージ送信端末と，前記メッセージを処理するメッセージ処理設備とを通信可能に接続し，前記メッセージ処理設備は，動作可能なロボットを有し，受信したメッセージを解析し，その解析結果に基づいて前記メッセージの内容を音声により読み上げるとともにその読上に対応させて前記ロボットの動作を制御するシステムであって，＼前記メッセージ送信端末は，前記ロボットの動作を制御するための動作制御情報を前記メッセージ中の文字列と対応付けて前記メッセージに埋め込む動作制御情報埋込手段と，前記動作制御情報埋込手段で前記動作制御情報を埋め込んだメッセージを前記メッセージ処理設備に送信するメッセージ送信手段とを有し，＼前記メッセージ処理設備は，受信したメッセージを解析するメッセージ解析手段と，前記メッセージ解析手段の解析結果に基づいて前記メッセージの内容を音声により読み上げるメッセージ読上手段と，前記メッセージ解析手段の解析結果に基づいて前記ロボットの動作を制御するロボット制御手段とを有し，＼前記ロボット制御手段は，前記メッセージに含まれる動作制御情報に基づいて，当該動作制御情報に対応する文字列の読上に対応させて前記ロボットを動作させるようになっていることを特徴とするメッセージ処理システム。(【請求項2】)
      イ 発明の属する技術分野
        本発明は，メッセージの解析結果に基づいてメッセージの内容を音声により読み上げるとともにその読上に対応させてロボットの動作を制御するシステムおよび方法，並びにそのシステムに係る設備，端末，プログラムおよびデータ構造に係り，特に，文章や通話では伝わりにくい感情や雰囲気を詳細に表現することができ，しかも文章が見づらくなるのを防止することができるメッセージ処理システム，音声信号処理システム，メッセージ処理設備，メッセージ送信端末，音声信号処理設備，メッセージ処理プログラム，音声信号処理プログラム，設備用プログラム，端末用プログラムおよびメッセージのデータ構造，並びにメッセージ処理方法，音声信号処理方法に関する。(【0001】)
      ウ 従来の技術
        従来，メッセージの解析結果に基づいてロボットの動作を制御する技術としては，例えば，特開平11-327872号公報(裁判所注：引用例2)に開示された電子メール端末(以下，第1の従来例という。)があった。第1の従来例は，ネットワークに接続され，ネットワークインタフェースを有する動物型ロボットを備え，ネットワークから受信した電子メールをユーザに提示する端末である。具体的には，ネットワークを介して電子メールを受信する受信部と，受信した電子メールを解析する電子メール解析部と，電子メール解析部の解析結果に基づいてロボットの矩体全体または矩体に属する部分を動かすよう制御する動作制御部で構成されている。動作制御部は，電子メール解析部で解析した電子メールの内容を読み上げるとともに，ロボットの矩体の正面をユーザの位置に向けて，効果音を出力するとともに，電子メール解析部で解析した電子メールの内容に含まれる顔文字によって，ロボットの矩体全体または矩体に属する部分を動かすよう制御する。(【0002】)
        これにより，従来，読み上げ時に無視されていた顔文字をロボットの動作として表現することができ，電子メールの文章の曖昧性を排除できる。また，動作プログラムを工夫することによって，文章では伝わりにくい感情や雰囲気などを伝えることも可能となり，電子メールを使ったコミュニケーションを豊かにすることができる。(【0003】)
      エ 発明が解決しようとする課題
        ところで，電子メールのやりとりでは，いわゆる顔文字が使用されることがあるが，一般に顔文字は，文の末尾に付加して使用されることが多い。そのため，第1の従来例によれば，一文を読み上げ終わったときにそのタイミングに合わせてロボットがお辞儀などの動作を行う。したがって，一文につき一動作を行わせるのがせいぜいであり，文章では伝わりにくい感情や雰囲気を詳細に表現するのが困難であった。(【0005】)
        また，一文中の特定箇所を読み上げている時にロボットを動作させるには，その特定箇所の近辺に顔文字を埋め込む必要がある。また，感情や雰囲気を詳細に表現するためには，顔文字を文章中に多数埋め込む必要がある。しかし，このような方法で電子メールを作成すると，電子メールを他の方法で表示したときに文章がたいへん見づらいものとなる。(【0006】)
        これらのことは，電子メールの内容に応じてロボットを動作させる場合に限らず，電子メール以外のメッセージの内容に応じてロボットを動作させる場合，または電話の通話内容に応じてロボットを動作させる場合などにも同様に想定される問題である。そこで，本発明は，このような従来の技術の有する未解決の課題に着目してなされたものであって，文章や通話では伝わりにくい感情や雰囲気を詳細に表現することができ，しかも文章が見づらくなるのを防止することができるメッセージ処理システム，音声信号処理システム，メッセージ処理設備，メッセージ送信端末，音声信号処理設備，メッセージ処理プログラム，音声信号処理プログラム，設備用プログラム，端末用プログラムおよびメッセージのデータ構造，並びにメッセージ処理方法，音声信号処理方法を提供することを目的としている。(【0007】)
      オ 課題を解決するための手段
        (ア) メッセージの内容の出力は，どのような形態で行ってもよく，例えば，音声，表示その他の出力形態により行うようになっていればよい。(【0012】)
        (イ) 本発明に係る請求項2記載のメッセージ処理システムは，メッセージを送信するメッセージ送信端末と，前記メッセージを処理するメッセージ処理設備とを通信可能に接続し，前記メッセージ処理設備は，動作可能なロボットを有し，受信したメッセージを解析し，その解析結果に基づいて前記メッセージの内容を音声により読み上げるとともにその読上に対応させて前記ロボットの動作を制御するシステムであって，前記メッセージ送信端末は，前記ロボットの動作を制御するための動作制御情報を前記メッセージ中の文字列と対応付けて前記メッセージに埋め込む動作制御情報埋込手段と，前記動作制御情報埋込手段で前記動作制御情報を埋め込んだメッセージを前記メッセージ処理設備に送信するメッセージ送信手段とを有し，前記メッセージ処理設備は，受信したメッセージを解析するメッセージ解析手段と，前記メッセージ解析手段の解析結果に基づいて前記メッセージの内容を音声により読み上げるメッセージ読上手段と，前記メッセージ解析手段の解析結果に基づいて前記ロボットの動作を制御するロボット制御手段とを有し，前記ロボット制御手段は，前記メッセージに含まれる動作制御情報に基づいて，当該動作制御情報に対応する文字列の読上に対応させて前記ロボットを動作させるようになっている。(【0016】)
          このような構成であれば，メッセージ送信端末では，動作制御情報埋込手段により，動作制御情報がメッセージ中の文字列と対応付けられてメッセージに埋め込まれ，メッセージ送信手段により，動作制御情報が埋め込まれたメッセージがメッセージ処理設備に送信される。メッセージ処理設備では，メッセージを受信すると，メッセージ解析手段により，受信したメッセージが解析され，メッセージ読上手段により，メッセージの解析結果に基づいてメッセージの内容が音声により読み上げられる。このとき，メッセージには動作制御情報が含まれているので，ロボット制御手段により，メッセージに含まれる動作制御情報に基づいて，その動作制御情報に対応する文字列の読上に対応させてロボットが動作する。(【0017】)
          ここで，メッセージ処理設備は，ロボットのみで構成してもよいし，ロボットおよびロボットの動作を制御する制御装置の組み合わせにより構成してもよい。前者の場合，ロボットは，メッセージ解析手段，メッセージ読上手段およびロボット制御手段を有することとなる。(【0018】)
          また，文字列の読上に対応させてロボットを動作させるとは，文字列の読上とロボットの動作とが対応していることが認識可能な態様でロボットを動作させることをいい，これには，例えば，文字列の読上タイミングに合わせてロボットを動作させること，文字列の読上の前後所定間隔をおいてロボットの動作を開始または終了すること，文字列の読上と同時にロボットの動作を開始または終了することが含まれる。(【0019】)
      カ 発明の実施の形態
        (ア) 本実施の形態は，本発明に係るメッセージ処理システム，音声信号処理システム，メッセージ処理設備，メッセージ送信端末，音声信号処理設備，メッセージ処理プログラム，音声信号処理プログラム，設備用プログラム，端末用プログラムおよびメッセージのデータ構造，並びにメッセージ処理方法，音声信号処理方法を，図1に示すように，電子メール処理端末200において，受信した電子メールの内容を音声により読み上げるとともにその読上に対応させてロボット100の動作を制御する場合について適用したものである。(【0060】)
        (イ) 動作制御情報は，電子メールにも埋め込むことができる。この場合，電子メールは，図6および図7に示すように，マークアップ言語形式に従ったデータ構造となる。図6および図7は，動作制御情報を埋め込んだ電子メールのデータ構造を示す図である。図6においては，「こんにちは」という対象文字列の先頭に開始制御タグ＜greet＞を，同対象文字列の末尾に終了制御タグ＜/greet＞を，制御タグ＜!JointAngle Data!＞よりも後方であって動作制御情報の先頭に開始制御タグ＜greet＞をそれぞれ挿入することにより動作制御情報を同対象文字列と対応付けている。また，「笑っちゃいました」という対象文字列の先頭に開始制御タグ＜laugh＞を，同対象文字列の末尾に終了制御タグ＜/laugh＞を，制御タグ＜!Joint AngleData!＞よりも後方であって動作制御情報の先頭に開始制御タグ＜laugh＞をそれぞれ挿入することにより動作制御情報を同対象文字列と対応付けている。なお，動作制御情報の書式については，s1が左辺となる演算式の右辺に記述されている内容がフィールド454の登録内容に対応し，s2が左辺となる演算式の右辺に記述されている内容がフィールド456の登録内容に対応し，s3が左辺となる演算式の右辺に記述されている内容がフィールド458の登録内容に対応している。(【0071】)
        (ウ) 次に，本実施の形態の動作を説明する。初めに，電子メールを送信する場合を説明する。電子メール処理端末200では，電子メールの作成が要求されると，電子メール送信処理が実行される。ここで，ユーザは，まず，電子メールとして送信したい文章を入力する。そして，入力した文章に対して動作制御情報を対応付けるには，動作制御情報の設定要求を入力し，動作制御情報を対応付けるべき文字列をマウス等で指定し，記憶装置42のなかから動作制御情報を選択する。(【0089】)
          電子メール処理端末200では，文字列が指定され，動作制御情報が選択されると，ステップS106を経て，選択された動作制御情報が指定文字列と対応付けられて作成中の電子メールに埋め込まれる。(【0090】)
      キ 発明の効果
        さらに，本発明に係る請求項2ないし14記載のメッセージ処理システムによれば，動作制御情報を文字列と対応付けてメッセージに埋め込むので，一文を読み上げる間にロボットに複数の動作や細かい動作を行わせることができる。また，ロボットに細かい動作を行わせるには，長い文字列に動作制御情報を対応付け，動作制御情報の方を詳細に設定すればよい。したがって，従来に比して，文章では伝わりにくい感情や雰囲気を比較的詳細に表現することができ，しかも文章が見づらくなる可能性を低減することができるという効果が得られる。(【0149】)
    (2) 引用例2及び3の各記載
      引用例2及び3の各記載は，以下のとおりである。
      ア 引用例2
        (ア) 本発明は，電子メール提示方法及び電子メール端末及び電子メール提示プログラムを格納した記憶媒体に係り，特に，ネットワークに接続された電子メール端末において，ユーザに対して電子メールを読み上げ，電子メール内の特定の記号列によって，手や足を動かすための電子メール提示方法及び電子メール端末及び電子メール提示プログラムを格納した記憶媒体に関する。(【0001】)
        (イ)
          図4は，本発明の電子メール端末の動作のフローチャートである。
          ステップ101)受信部1によりネットワークインタフェースを介して電子メールを受信する。(【0022】)
          ステップ105)第二解析部3では，格納部9に格納された対応プログラムによって，電子メールを解析し，特定の記号列(例えば，スマイリー)によって動作発生のタイミングを計算し，制御部8に渡す。また，音声の抑揚を計算し，読み上げ部5に転送する。(【0024】)
          ステップ107)読み上げ部5は，制御部8からの信号によって，ステップ105で求められた抑揚に沿って電子メールの内容の読み上げを実行する。
          ステップ108)動作部7は，制御部8からの信号によって格納部9に格納されている動作プログラムを実行することによって，計算されたタイミングに従って，ロボットの手足体を動かす。(【0025】)
          ステップ109)読み上げ部5による読み上げが終了した場合には，処理を終了し，読み上げが実行されている途中であれば，ステップ106に移行する。(【0026】)
      イ 引用例3
        (ア) 本発明は，舞踏したり発話したりするロボットの制御技術に関するものである。(【0001】)
        (イ) ＜入力メールテキスト例＞…「失礼しまーす。美穂です。さっちゃん家での，ホームパーティのお誘いでーす。今回は，自分の得意料理を持ち寄りましょう。」この中から，タグの手掛かりとなる単語(以下，手掛かり単語と略す)を抽出し，感情タグ情報を取得する。この例文の場合には，「失礼しまーす」という単語から感情タグ情報『挨拶』を取得し，「ホームパーティ」という単語から感情タグ情報『楽しみ』を取得し，文末の「(持ち寄り)ましょう」という単語からタグ情報『勧誘』を取得する。そして，これら感情タグ情報の手掛かり単語を，予め韻律パラメータ(ピッチ周波数，パワー，音韻継続長)を変調し，抑揚を持たせた音声ファイルとして台詞データベースに格納しておくことにより，前記入力メールテキストを出力するときに感情が込められた台詞として出力することができる。(【0036】)
        (ウ) 本発明においては，前記形態素解析により取得した感情タグ情報に対応してロボットを動作させるために，予め，感情タグ情報に対応付けて，ロボットの関節駆動用モータ…に対する指令値…の時系列を設定しておき，これをジェスチャデータベースに格納しておく。(【0038】)
    (3) 参考文献1～3の各記載
      参考文献1～3の各記載は，以下のとおりである(なお，参考文献3につき，別紙図表目録記載3の図を参照)。
      ア 参考文献1
        (ア) 本発明は，例えばインターネットを介してコンテンツを取得して利用するロボット装置及びそのコンテンツ管理方法に関する。(【0001】)
        (イ) 本実施の形態では，常にロボット装置を介してコンテンツが利用される。すなわち，例えばユーザ自身がコンテンツを利用するのではなく，ロボット装置がテキスト文を話し，或いはダンスを披露する。(【0026】)
      イ 参考文献2
        (ア) 本発明は，コンテンツ選択装置及び方法並びにロボット装置に関し，例えばエンターテインメントロボットに適用して好適なものである。(【0001】)
        (イ) また中央の『“こんにちは”』等の文字はロボットが発話すべき発話内容を表しており，その右横の『話し掛ける』等の文字はそのときのロボットが発現すべき動作を表している。さらに一番右の数値は，次に再生すべき発話内容の番号(一番左の数値)を示す。(【0071】)
      ウ 参考文献3
  215 挿入したいタグを一覧メニューから選択する
    タグの機能によって分類されたツリーからタグを選択して，挿入できます。
    STEP  01
    ［挿入］メニューから［タグ］を選択し，［タグ選択］ダイアログを表示します。［タグ選択］ダイアログでは左のツリーより挿入したいタグのカテゴリを選択します❶。右に候補が表示されるので，左のツリーから候補を絞り込みます❷。［タグ情報］をクリックすると❸，タグに関する情報が表示されます❹。
    STEP  02
    ［挿入］ボタンをクリックすると，［タグエディタ］ダイアログが表示されますので，挿入するタグの属性を設定します。
    STEP  03
    ［タグエディタ］ダイアログを閉じると，ドキュメント上にタグが挿入されます❺。タグの挿入を終了する場合は，［閉じる］ボタンをクリックします❻。(277頁1行～末行)
    (4) 乙1～5の各文献の記載
      乙1～5の各文献(以下「乙1文献」のようにいう。)の記載は，以下のとおりである(なお，図面は別紙図表目録記載4～7の各図面を参照)。
      ア 乙1文献(特開2002-91891号公報)
        (ア) 本発明は，電子メールの文章を感情をこめて読み上げる電子メール読み上げ装置，その方法およびそのプログラムが記録されたコンピュータ読み取り可能な記録媒体，並びにデータが記録されたコンピュータ読み取り可能な記録媒体に関する。(【0001】)
        (イ) 図2は，感情表現用記号列の具体例を示す図である。感情表現用記号列としては，表現したい感情に対し次のような記号列を使用することができる。例えば，「うれしい」に対し「(＾＾))」，「お願い」に対し「m(＿．＿)m」，「万歳」に対し「＼(＾0＾)／」，「いてっ」に対し「(＊＞＿＜)」といった，いわゆる顔文字を使用できる。また，「こわい」に対し「Awful」，「きらい」に対し「Dislike」，「疑問」に対し「？」，強調に対し「！」といった特定の単語あるいは記号を使用することもできる。また，これらの記号列の組み合わせを定義しておき，中間的な感情を表現できるようにしてもよい。(【0021】)
          図3は，解析部12の働きを示す図である。ここでは，電子メールの文章に感情表現用記号列が含まれる場合，どのようにして音声による感情表現を行うかを説明する。(【0022】)
          メール文章には送信者によって感情表現用記号列(図ではA，B，Cで示す)が埋め込まれる。解析部12は，メール文章を「文」に分解して，感情表現用記号列を対応づける。ここにいう「文」とは，単に「メール文章を分解したもの」であり，文と感情表現用記号列との対応づけは，これら双方に管理番号などを付すことなどにより行う。これにより，後述する処理で，音声合成部14が，どの「文」と感情表現用記号列とが対応するかを識別することができる。(【0023】)
        (ウ) このように解析部12がメール文章を感情表現用記号列と対応する文に分解し，さらに，音声パラメータ選択部13が音声合成パラメータを検索することにより，メール読み上げ装置1が，各文を感情表現用記号列に応じた音声で読み上げることができるようになる。(【0026】)
      イ 乙2文献(特開2002-342234号公報)
        (ア) 本発明は，携帯電話や携帯用端末，パーソナルコンピュータ等において，電子メール等の文章情報と顔画像情報を表示し，文章情報の内容に応じて顔画像を変化させるための表示方法に関する。(【0001】)
        (イ) メッセージ作成手段8では図示しないキーボード等を使用して，感情表記記号9を用いつつ文章を入力する。これは通常の顔文字を織り交ぜながら電子メールの文章を入力することと同じ要領で行われる。感情表記記号9は図3に示すような顔文字のほかに表情を表す漢字一文字を括弧でくくったものを含んでも良い。なお，これらの感情表記記号9は同じ感情を表すものであってもその表記によって表情の度合いを変化させても良い。具体的には，「(＾．＾)」は微笑む程度の笑いを表し，「(＾○＾)」は大笑いを表す。(【0014】)
          そして，文章の入力を終了すると，文字色変更手段10が動作し，文章の頭からちょうど文章を読む速度で色変わりしていく。同時に検索手段11は色変わりした文字が前述した感情表記記号9であるかどうかをチェックしていく。文章中に感情表記記号9が発見されると，アニメーション対応テーブル12から同じ記号を探し出し，対応するアニメーションを特定する。このとき，対応するアニメーションとは，感情表記記号9が「(＾．＾)」の場合には段々微笑んでいく顔のアニメーションであり，感情表記記号9が「(＾○＾)」の場合には微笑んでから大笑いに変化するアニメーションである。(【0015】)
          そして，感情表記記号9に対応するアニメーションデータ番号を獲得したら，再生手段13へデータ番号を送る。再生手段13ではデータ記憶部14からアニメーションデータを選択し，アニメーションを再生し，表示する。このようにして，文章の入力が終了するまで文字色の色変わりとアニメーション再生を繰り返す。(【0016】)
        (ウ) 次に送受信処理について説明する。本発明の表示方法を備えた送受信装置の場合，送信すべき情報は一般的な電子メールと同じく，メールヘッダと本文のみである。メールヘッダには本発明の表示方法を使用したことが記載されており，…受信側も本発明の表示方法を採用している場合，中央制御手段6はメモリバッファに蓄積したメールの内容を次の要領で表示する。(【0022】)
          文字色変更手段10は，本文の先頭から文字色の変更を開始する。前述した通り，文字を次々と赤色に変更する。そして，文字色を変更された文字が感情表記記号であるかを検索手段11にて検索し，感情表記記号であった場合には，アニメーション対応テーブルからアニメーションデータ番号12を獲得し，そのデータを再生手段13にて再生して表示手段15に表示する。なお，本実施例のアニメーションデータ及びアニメーション対応テーブルは送信側と受信側とで共通のものである。(【0023】)
      ウ 乙3文献(特開2006-48379号公報)
        (ア) 本発明は，音声および画像を用いてメッセージを伝達する技術に関する。(【0001】)
        (イ) ユーザAは，移動機10Aを操作し，ユーザBに伝えるメッセージを電子メールの本文とし，画像データを添付ファイルとした電子メールを生成する。そしてユーザAは，移動機10Aを操作し，生成した電子メールをコンテンツ生成装置30を宛先として送信する…。(【0012】)
          コンテンツ生成装置30は，この電子メールを受信すると…，まず添付されている画像データを抽出する…。コンテンツ生成装置30は，画像データを抽出すると，この抽出した画像データが表す画像中のオブジェクト，即ち，子供の顔に基づいてアバタを生成する…。次にコンテンツ生成装置30は，受信した電子メールの本文と差出人の電子メールアドレスとを電子メールから抽出し…，抽出した本文を表すテキストデータと，生成したアバタの画像を表すアバタデータと，抽出した差出人の電子メールアドレスとを対応付けて記憶部105に記憶する…。(【0013】)
          次にコンテンツ生成装置30は，…音声付きのアバタの声色を選択するためのリストボックスBX11と，電子メールから抽出した本文が記述されたテキストボックスBX12とを有し，記憶したアバタデータのURL…と，差出人の電子メールアドレスとが埋め込まれたWebページを生成して記憶する…。(【0014】)
        (ウ) このWebページの「声の選択」と記載されている部分において，移動機10のユーザは，音声付きアバタの声色を選択する。ユーザAがこのページ中の「選択」ボタンをクリックする操作を行うと，図7に示したように，各種声色の項目リストが表示される。ユーザAが，この中の項目の一つを選択する操作を行うと，図6の画面に戻り，選択された声色の項目が表示される。(【0017】)
          また，このWebページのテキストボックスBX12において，移動機10のユーザは，文章中に特定の絵文字を挿入し，アバタの表情とアバタの表情を替えるタイミングとを設定する。ユーザAは，例えば，「こんにちはおじいちゃん元気ですか」と音声が再生された時点でアバタの表情を笑顔にしたい場合には，図8に示したように笑顔の絵文字C10を「か」の後ろに挿入する。また，例えば，「体重が3500グラムもありました」と音声が再生された時点でアバタの表情をウインクの表情にする場合には，図8に示したように，ウインクの絵文字C11を「た」の後ろに挿入する。(【0018】)
          ユーザAが，表示されたWebページにおいて各種設定を行った後，Webページ中の「ダウンロードボタン」をクリックする操作を行うと，移動機10Aは，選択された声色の項目を示す声色データと，テキストボックスにある文字列と，Webページに埋め込まれている電子メールアドレスとをコンテンツ生成装置30へ送信する…。(【0019】)
          コンテンツ生成装置30は，これらを受信すると，受信した電子メールアドレス…に対応付けて記憶されているアバタデータを読み出す…。次にコンテンツ生成装置30は，受信した文字列を解析し，周知の音声合成技術を用いて文字列を順次音声に変換し，音声データを生成する…。また，コンテンツ生成装置30は，受信した文字列から絵文字を抽出し，絵文字が表す表情を解析する。コンテンツ生成装置30は，この解析した表情に基づいて，アバタデータが表すアバタの目や口の位置および形状を編集し，絵文字の表情のアバタを表すアバタデータを生成する…。(【0020】)
          次にコンテンツ生成装置30は，生成したアバタデータと音声データとを用いて音声付きの動画を生成する。具体的には，まず，コンテンツ生成装置30は，受信したメッセージを解析し，アバタの表情を替えるタイミングと，このタイミングにおけるアバタの表情とを特定する。例えば，図8に示したように「こんにちはおじいちゃん元気ですか」という文字列の後に，アバタの表情を笑顔にする絵文字C10が挿入されている場合，コンテンツ生成装置30は，文字列中における絵文字C10の位置を特定し，この絵文字C10より前にある文字列を読み終えるまでの時間を音声データに基づいて算出する。コンテンツ生成装置30は，例えば，この文字列を読み終えるまでに要する時間が2秒であると算出すると，この2秒間は動画像の画像を当初生成したアバタデータが表す画像とし，2秒経過した時点からの画像を，ステップSB4で生成した笑顔のアバタ画像とする。また，「体重が3500グラムもありました」という文字列の後に，アバタの表情をウインクの表情にする絵文字C11が挿入されている場合，コンテンツ生成装置30は，文字列中における絵文字C11の位置を特定し，音声データに基づいて，この文字列を読み終えるまでの時間を算出する。コンテンツ生成装置30は，例えば，アバタの表情を笑顔にしてからこの文字列を読み終えるまでに要する時間が5秒であると算出すると，この5秒間は動画像の画像を笑顔のアバタ画像とし，5秒経過した時点からの画像をウインクした表情のアバタ画像とする。コンテンツ生成装置30は動画の生成が終了すると，この生成した動画と音声データとを統合したコンテンツデータを生成し…，生成したコンテンツデータを移動機10Aへ送信する…。(【0021】)
          移動機10Aは，このコンテンツデータを受信すると，受信したコンテンツデータを記憶する。ユーザAは，移動機10Aにおいてコンテンツデータが受信されると，ユーザBを宛先とした電子メールを生成し，受信したコンテンツデータをこの電子メールに添付する。そして，ユーザB が移動機10Aを操作し，生成した電子メールを送信する操作を行うと，コンテンツデータが添付された電子メールが移動機10から送信され…，移動機10Bにて受信される…。(【0022】)
          移動機10Bにて電子メールが受信されると，ユーザBは，移動機10Bを操作し，受信した電子メールを開封する操作を行う。次にユーザBが，添付されているコンテンツデータの再生を指示する操作を行うと，移動機10Bは，コンテンツデータを再生する。コンテンツデータを再生してアバタを表示し，「こんにちはおじいちゃん元気ですか」という音声メッセージを再生し終えると，アバタの画像が笑顔の画像に切り替わる。また，音声メッセージの再生を続け，「体重が3500グラムもありました」という音声メッセージを再生し終えると，アバタの画像がウインクの表情に切り替わる。このように移動機10においてコンテンツデータが再生されると，ユーザが絵文字を設定した言葉の部分でアバタの表情が切り替わる。(【0023】)
          以上説明したように本実施形態によれば，音声メッセージとアバタの表情とを同調させることが可能となり，より，感情や気持ちがコミュニケーション相手に伝わるようになる。また，本実施形態によれば，アバタの表情を設定するための絵文字をメッセージの文中に挿入するという簡易な操作により，アバタの表情とアバタの表情を替えるタイミングとを設定することできるため，パーソナルコンピュータのように大きな画面を表示できない移動機10のような端末においても，ユーザは，容易にアバタの表情とアバタの表情を替えるタイミングとを設定することができる。(【0024】)
      エ 乙4文献(特開2002-103258号公報)
        (ア) 本発明は，所定のシナリオに従ったデータの作成・編集を支援するためのオーサリング・システム及びオーサリング方法に係り，特に，ロボットの所定の動作パターンを記述する一連のコマンド／データの作成・編集を支援するオーサリング・システム及びオーサリング方法に関する。(【0001】)
        (イ) プロジェクト編集時には，図6に示すような「プロジェクト・ウィンドウ」が表示される。プロジェクト・ウィンドウは，タイトル・バーと，メニュー・バーと，ツール・バーと，リスト表示領域を含む。…(【0149】)
          図示の通り，プロジェクト・ウィンドウ内には，ビヘイビアの編集並びにアクションの編集に使用される，ビヘイビア・ファイル，アクション・ファイル，モーション・ファイル，サウンド・ファイル，LED動作ファイルなどの各ファイルのリストがツリー形式で表示されるようになっている。(【0150】)
          ビヘイビア，アクションのリスト上の項目をダブル・クリックすると，該当する編集ウィンドウ…が開く。また，モーションのサムネイルをダブル・クリックすると，モーション・プレビュー・ウィンドウ…が開く。(【0151】)
          プロジェクト・ウィンドウは，ツリー・リスト上で選択された項目に関する詳細情報を表示する機能を有する。(【0152】)
      オ 乙5文献(特開2001-273125号公報)
        (ア) 本発明は，グラフィカルなユーザインタフェースを有するプログラムを，ユーザインタフェースを構成する部品を組み合わせることにより自動生成することができ，ソフトウェアプログラム開発の生産性及び品質の向上を図ることが可能なソースプログラム生成方法およびそのシステム，ならびにプログラム記録媒体に関する。(【0001】)
        (イ) 図3は，図1のGUI部品選択画面の例を示す図である。ソースプログラム生成の際には，GUI部品選択画面101にGUI部品の名称を一覧表示し，さらにGUI部品間の継承関係を階層構造で表示している。当該画面には，GUI部品を選択した時に，その部品の仕様の説明を画面内に表示するようにしても良い。ここでは，一例としてラベル付き入力テキスト部品の名称が表示されており，その階層構造としてラベル部品と入力テキスト部品とが下層位置に表示され，その下に年号選択コンボボックス部品が表示される。すなわち，名称はラベル付き入力テキスト部品であるが，内容としては下位の部品であるラベル部品と入力テキスト部品から構成されていることが判る。(【0011】)
    (5) 本願発明と引用発明との対比
      本願発明と引用発明との一致点・相違点につき，本件審決の前記認定(第2の3(3))のとおりであることは，当事者間に争いがない。
  3 取消事由(本願発明の容易想到性判断の誤り)について
    (1) 相違点1に関する容易想到性について
      ア
        参考文献1及び2にも記載されるように，ロボットに発話させることは，本願優先日前における周知技術であったといえる。
        また，引用例1【0018】の記載は，引用発明におけるメッセージ読上手段をロボットの一部として構成し，発話の主体をロボットとすることを示唆するものと理解される。
        そうすると，周知技術に基づいて，引用発明におけるメッセージ読上手段をロボットの一部として構成することにより，テキストをロボットによって話されるものとすることは，当業者が適宜採用し得る程度の事項であるといえる。
      イ 原告の主張について
        原告は，引用発明と参考文献1及び2記載の発明とは全く異なり，また，引用例1と参考文献1及び2との間には，技術分野の関連性等がないなどと主張する。
        しかし，引用例1(【請求項2】，【0016】～【0019】，【0060】)も参考文献1及び2も，いずれもロボットに関する技術を開示したものであり，また，前記のとおり，引用例1【0018】には，メッセージ読上げをロボットに行わせることの示唆がある。
        その他原告がるる指摘する事情を考慮しても，この点に関する原告の主張は採用できない。
      ウ 小括
        以上のとおり，相違点1に関する容易想到性についての本件審決の判断に誤りはない。
    (2) 相違点2に関する容易想到性について
      ア 周知技術
        引用例1には，従来技術として引用例2が引用され，電子メールの内容に含まれる「顔文字」によりロボットの矩体全体又は矩体に属する部分を制御することが示されている(【0002】，【0003】)。
        引用例2には，特に，ネットワークに接続された電子メール端末において，ユーザに対して電子メールを読み上げ，電子メール内の特定の記号列によって手や足を動かすための電子メール提示方法等に関する発明において，電子メールに含まれる「スマイリーと呼ばれる記号列」によりロボットを制御することが記載されている(【0001】，【0024】～【0026】)。
        また，引用例3には，舞踏したり発話したりするロボットの制御技術に関する発明において，メールテキストに含まれる手掛かり単語としての顔文字によりロボットを制御することが記載されている(【0001】，【0036】，【0038】)。
        さらに，乙1文献には，電子メールの文章を感情をこめて読み上げる電子メール読み上げ装置等の発明において，電子メールに埋め込んだ「顔文字」により音声による感情表現を制御することが記載されている(【0001】，【0021】～【0023】，【0026】)。乙2文献には，携帯電話等において，電子メール等の文章情報と顔画像情報を表示し，文章情報の内容に応じて顔画像を変化させるための表示方法に関する発明において，電子メール中の「顔文字」によりアニメーションデータを選択することが記載されている(【0001】，【0014】～【0016】，【0022】，【0023】)。加えて，乙3文献には，音声及び画像を用いてメッセージを伝達する技術に関する発明において，電子メールに挿入した絵文字に基づいてアバタのアニメーションデータを生成することが記載されている(【0001】，【0012】～【0014】，【0017】～【0024】)。
        これらの記載によれば，テキスト中の絵文字や顔文字によりロボットの動作を制御することは，本願優先日前における周知技術であったといえる。
      イ
        上記周知技術における絵文字や顔文字は，いずれも「図形的なシンボル」であるということができる。
        そうすると，メッセージの解析結果に基づいてメッセージの内容を音声により読み上げるとともにその読上げに対応させてロボットの動作を制御するシステムに関する発明である引用発明において，メッセージに埋め込む動作制御情報として上記周知技術に係る顔文字や絵文字すなわち「図形的なシンボル」を採用することの動機付けがあることは明らかである。
      ウ 阻害要因の有無
        引用例1の記載(【0002】，【0005】～【0007】)によれば，電子メールの内容に含まれる顔文字によってロボットの矩体全体又は矩体に属する部分を動かすよう制御する従来技術においては，顔文字が使用される位置との関係から，「一文につき一動作を行わせるのがせいぜいであり，文章では伝わりにくい感情や雰囲気を詳細に表現するのが困難であった」とともに，「一文中の特定箇所を読み上げている時にロボットを動作させるには，その特定箇所の近辺に顔文字を埋め込む必要がある」ため，「感情や雰囲気を詳細に表現するためには，顔文字を文章中に多数埋め込む必要がある」こととなるが，「このような方法で電子メールを作成すると，電子メールを他の方法で表示したときにたいへん見づらいものとなる」という課題があるところ，引用発明は，これを解決することを目的とするものと認められる。もっとも，引用例1においては，「メッセージの内容の出力は，どのような形態で行ってもよく，例えば，音声，表示その他の出力形態により行うようになっていればよい」とされており(【0012】)，文字による表示を必ず伴うものとはされていない。
        また，上記のような引用発明の解決すべき課題は，いずれもいわば程度の問題ということができるものであり，例えば，文章の性質等から感情や雰囲気を詳細に表現する必要がなく，簡便に表現できれば足りるような場合についてまで，ロボットの矩体の動作制御の手掛かりとして顔文字を使用することを積極的に排除する趣旨まで看取することはできない。
        さらに，前記のとおり，テキスト中の絵文字や顔文字によりロボットの動作を制御することは，本願優先日前における周知技術であったところ，引用発明において，メッセージに埋め込む動作制御情報として顔文字や絵文字を採用することができないという技術上の理由も認められない。
        そうである以上，引用発明には，電子メール中に含まれる顔文字に従ってロボットを動作させることが記載されている他の文献を組み合わせることに阻害要因があるということはできない。このことは，引用例1が引用例2記載の技術を従来技術と位置付けていることを考慮しても異ならない。
      エ
        したがって，引用発明において，相違点2に係る本願発明の構成を得ることについては，上記周知技術を採用することの動機付けがあり，阻害事由はないことから，当業者が容易に想到し得ることといえる。
      オ 小括
        以上のとおり，相違点2に関する容易想到性についての本件審決の判断に誤りはない。
    (3) 相違点3に関する容易想到性について
      ア 周知技術
        前記認定に係る参考文献3，乙4文献及び乙5文献の各記載によれば，参考文献3では，Webデザインのアプリケーション「Dreamweaver」を使用してWebデザインを行うにあたって，タグを挿入する際の操作方法として，「タグ選択」ダイアログにおいてタグのカテゴリがツリー表示されることが示されているといえる。他方，乙4文献には，所定のシナリオに従ったデータの作成・編集を支援するためのオーサリング・システム等に係る発明において，プロジェクト編集時に表示される「プロジェクト・ウィンドウ」内に，ビヘイビアの編集並びにアクションの編集に使用される各ファイルのリストがツリー形式で表示され，このリストを利用することが示されている。また，乙5文献には，ソフトウェアプログラム開発の生産性及び品質の向上を図ることが可能なソースプログラム生成方法等に関する発明において，ソースプログラム作成の際，GUI部品選択画面にGUI部品の名称が一覧表示され，さらにGUI部品間の継承関係が階層構造で表示されることが示されている。
        これらを踏まえると，ロボット制御を含むコンピュータのプログラミングに供するシステムにおいて，ユーザに選択させる情報をツリー構造で管理し，ツリー表示を行わせることにより，情報の選択操作の便を図ることは，本願優先日前に既に一般的に行われていた周知の技術事項であったということができる。
      イ
        本願明細書の記載によれば，本願発明は，ロボット・プログラミング・システムの分野に属するものであり(【0001】)，コマンド・タグのライブラリをツリー構造とし，コマンド・タグのツリーを表示できるようにすることによって，ロボット制御におけるプログラミング作業を簡単化するという課題を解決するものということができる(【0002】，【0004】，【0018】，【0030】)。
        他方，引用発明において，「選択された動作制御情報が指定文字列と対応付けられて作成中の電子メールに埋め込まれ」，「電子メール」に「開始制御タグ」等を「挿入する」ことは，コンピュータのプログラミング作業と同種の性質を有しており，その簡単化が望ましいことは当然である。
        また，前記のとおり，参考文献3には，HTMLプログラムを作成する際に，その作成に使用するタグデータをツリー表示することが記載されている。
        このように，本願発明及び引用発明に係る技術も，参考文献3記載の技術も，いずれもコンピュータのプログラミングに関連するものといえる。かつ，引用例1には，引用発明において「電子メール」に「開始制御タグ」等を「挿入する」ことを簡単化するにあたり，データをツリー表示することによって，データ選択を容易なものとする技術を組み合わせることを妨げる記載は見当たらない。
        そして，前記のとおり，ロボット制御を含むコンピュータのプログラミングに供するシステムにおいて，ユーザに選択させる情報をツリー構造で管理して，ツリー表示を行わせることにより，情報の選択操作の便を図ることは，本願優先日前に周知の技術事項であったということができる。
        そうである以上，コンピュータのプログラミングに関連する技術に係る発明である引用発明において，ロボット制御におけるプログラミング作業を簡単化するために，参考文献3に示されたものを含む上記周知技術を採用することの動機付けがあり，阻害事由がないことは明らかである。このことは，参考文献3にロボットの動作の制御に関する示唆がないことを考慮しても異ならない。
      ウ
        また，本願発明に係る特許請求の範囲請求項1には「前記ライブラリは，…ツリー構造を有しており」とのみ記載されており，「コマンド・タグ(カテゴリではなくコマンド・タグそれ自体)がツリー構造でライブラリに保存されている」という構成は，特許請求の範囲の記載に含まれていない。しかも，「ツリー構造の各コマンド・タグの中から，ユーザが所望するコマンド・タグを選択し，そのコマンド・タグをテキスト中に挿入するという簡単な操作」は，引用発明及び上記周知の技術事項から予測可能な効果である。
        このため，本願発明につき，上記構成を備えることにより，「ツリー構造の各コマンド・タグの中からユーザが所望するコマンド・タグを選択し，そのコマンド・タグをテキスト中に挿入するという簡単な操作だけで(二度手間の作業を要せず)，HTML等のマークアップランゲージに精通しているエキスパートでないユーザであっても，(図形的なシンボルを選択するだけでよいので)ロボットに，テキストを話すと同時に，所望する動作をさせることができる」との効果を奏するものということはできず，当該効果をもって特別に顕著なものということもできない。
      エ
        そうすると，引用発明において，動作制御情報をツリー構造で管理し，記憶装置の中から動作制御情報を選択させるにあたり，ツリー表示を行わせることは，当業者が容易に想到し得ることである。
      オ 小括
        以上のとおり，相違点3に関する容易想到性についての本件審決の判断に誤りはない。
    (4) まとめ
      以上によれば，本願発明の進歩性に関する本件審決の判断に誤りはなく，取消事由は理由がない。この点に関する原告の主張はいずれも採用できない。
  4 結論
    よって，原告の請求は理由がないからこれを棄却することとし，主文のとおり判決する。
