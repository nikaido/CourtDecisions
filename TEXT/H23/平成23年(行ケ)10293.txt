主文
  原告の請求を棄却する。
  訴訟費用は原告の負担とする。

事実及び理由
第1 原告の求めた判決
  特許庁が無効2011-800016号事件について平成23年8月9日にした審決を取り消す。
第2 事案の概要
  原告は，被告の有する本件特許について無効審判請求をしたが，請求不成立の審決を受けた。本件はその取消訴訟であり，争点は，容易推考性の存否である。
  1 特許庁における手続の経緯
    被告は，本件特許第3097534号(発明の名称「楽音生成方法」，平成7年12月21日出願，平成12年8月11日特許登録，特許公報は甲11，請求項の数1)の特許権者である。
    原告は，平成23年2月2日に，本件特許について無効審判請求をしたが(無効2011-800016号)，特許庁は，平成23年8月9日に，「本件審判の請求は，成り立たない。」との審決をし，その謄本は平成23年8月18日に原告に送達された。
  2 本件発明の要旨
    本件特許の請求項1(本件発明)は次のとおりである。
    【請求項1】
    演算処理装置による演算により楽音波形サンプルを生成する楽音生成方法であって，
    複数のサンプリング周期に対応する演算周期毎に該演算周期に対応する期間に含まれる複数の楽音波形サンプルを一括生成する楽音波形サンプル生成処理を起動し，
    波形のエンベロープ特性を前記演算周期を単位とする折れ線により近似して各サンプリングタイミングにおけるエンベロープ値を算出することを特徴とする楽音生成方法。
  3 審判における原告主張の無効理由(特許法29条2項)
    本件発明は，特開平2-179694号公報(甲1)記載の発明に，特開平7-261763号公報(甲2)記載の発明を適用することによって，当業者が容易に発明をすることができたものである。
  4 審決の理由の要点
    (1)
      甲1公報に記載された甲1発明，本件発明と甲1発明との一致点及び相違点は次のとおりである。
      【甲1発明】
      マイクロコンピュータによる演算により楽音波形の生成を行う電子楽器用処理装置の楽音波形生成方法であって，
      楽音のサンプリングタイムごとの割込信号により実行されるプログラムのなかに，楽音の波形を演算するルーチンと楽音のエンベロープを演算するルーチンとを含め，
      前記プログラムでは，今回波形値と次回波形値とをアドレスの小数部で直線補間し，直線補間したデータに現在エンベロープ値を乗算してチャンネルの楽音データを得，それを波形加算用レジスタの内容に加えて楽音データを累算し，
      前記エンベロープの波形は折れ線により近似されている，
      楽音波形生成方法。
      【一致点】
      演算処理装置による演算により楽音波形サンプルを生成する楽音生成方法であって，
      サンプリング周期に対応する演算周期ごとに該演算周期に対応する期間に含まれる楽音波形サンプルを生成する楽音波形サンプル生成処理を起動し，
      波形のエンベロープ特性を折れ線により近似して各サンプリングタイミングにおけるエンベロープ値を算出することを特徴とする楽音生成方法。
      【相違点1】
      本件発明は，複数のサンプリング周期に対応する演算周期ごとに該演算周期に対応する期間に含まれる複数の楽音波形サンプルを一括生成する楽音波形サンプル生成処理を起動するのに対し，甲1発明は，1サンプリング周期に対応する演算周期ごとに該演算周期に対応する期間に含まれる1楽音波形サンプルを生成する楽音波形サンプル生成処理を起動する点。
      【相違点2】
      本件発明では，波形のエンベロープ特性を前記演算周期を単位とする折れ線により近似するのに対し，甲1発明は，波形のエンベロープ特性を折れ線により近似するが，折れ線は，前記演算周期を単位とするものではない点。
    (2) 相違点について
      相違点2に係る本件発明の構成の「前記演算周期」は，相違点1に係る本件発明の構成の「複数のサンプリング周期に対応する演算周期」であって，相違点1，2は互いに関連しているから，これらを併せて検討する。
      甲2公報に開示された技術的事項は，いわゆる分析合成系の音源であり，入力された波形データの複数サンプルを抽出して1フレームとし，1フレームを分析して周波数データと強度データとを得て記憶し，その記憶された周波数データと強度データとを読み出して加算合成により1フレームの波形データを合成することを前提とするものである。
      したがって，上記加算合成により合成される1フレームの波形データは，複数サンプルからなるものであって，これは記憶された1組の周波数データと強度データから1組の複数サンプルの1フレームが合成される(「記憶された1組の周波数データと強度データ」と「1組の複数サンプルの1フレーム」とは，一対一に対応する。)ものであるから，この意味では，波形データを1サンプルごとではなく一括生成するという技術的思想が記載されているということはできる。
      しかしながら，本件発明は，「一括生成する複数のサンプリング周期に対応する演算周期」を単位とする折れ線により，波形のエンベロープ特性を近似するものであり，楽音の波形とエンベロープとを1サンプルごとに生成する甲1発明に，甲2公報に開示された一括生成の技術的思想を適用したとしても，「一括生成する複数のサンプリング周期に対応する演算周期」を単位とする折れ線により，波形のエンベロープ特性を近似するという本件発明の構成が容易に想到し得るとはいえない。また，波形のエンベロープ特性の折れ線近似について，必要に応じて任意に近似することができるとしても，折れ線による近似の単位を上記演算周期の単位とすること(上記演算周期を単位とする折れ線とすること)までもが容易に想到し得るとはいえない。そのような技術的思想は甲1公報にも甲2公報にも存在しない。本件発明は，そのような構成としたことにより，1サンプルごとに折れ線の変化点に到達したか否かをチェックする必要がないことにより演算の負荷を軽減することができるという効果を奏するものである。
      したがって，相違点1及び2に係る本件発明の構成は，甲1発明に甲2公報記載の発明を適用することによって，当業者が容易に発明をすることができたものということはできない。
第3 原告主張の審決取消事由(相違点1，2に関する判断の誤り)
  1 相違点1について
    (1)
      相違点1に係る本件発明の構成の「一括生成」とは，複数の発音チャンネルを1サンプルの演算生成ごとに切り換えるのではなく，1つの発音チャンネルについて複数サンプルからなる1フレーム分をまとめて演算生成することを指すものである。
      本件発明の従来技術では，発音チャンネルごとに1サンプルずつ波形サンプルデータを演算生成し，これを全発音チャンネルについて繰り返し実行し，得られた波形サンプルデータを累算することで1サンプリングタイミング分の楽音波形データの生成を行うのであるが，その過程において，各発音チャンネルごとに準備処理が必要であり，ある発音チャンネルの1サンプルの波形サンプルデータを得た後は，準備処理によって得られた各種データは初期化され，次の発音チャンネルの準備処理が行われるという冗長な処理が連続することになる。本件発明の「一括生成」の構成は，このような準備処理の無駄を解消するためのものである。
      ところで，信号処理工学の技術分野において，複数のタスクを切り換えて並列処理する時分割マルチタスク処理をする際に，所定の時間ごとに他のタスクへの切換をせずに，あるタスク処理を連続して行うことにより全体の処理を効率化する技術は，特開昭62-271147号公報(甲13の1)，特開平6-149594号公報(甲13の2)，特開平6-187169号公報(甲13の3)，特開平6-187170号公報(甲13の4)，特開平5-49152号公報(甲13の5)，特開平5-274788号公報(甲13の6)に開示されるように，周知技術であった。
      本件発明の従来技術は，各発音チャンネルごとの楽音波形データの演算がそれぞれ別のタスクに相当するから，各発音チャンネルを1サンプル単位で切り換えて，時分割マルチタスク処理を行うものであるといえる。そうすると，本件発明の「一括生成」は，そのような従来技術に上記周知技術を適用し，1サンプルごとに他の発音チャンネルに切り換えず，1つの発音チャンネルで複数サンプルの楽音波形データをまとめて処理するようにしたものにすぎない。
      そして，甲1発明は，パラメータの切換処理が無駄な準備処理であるという課題が本件発明と共通しており，時分割マルチタスク処理においてタスクを連続して実行するという上記周知技術を適用することによって，容易に相違点1に係る本件発明の「一括生成」の構成に至る。
      したがって，相違点1は実質的な相違点ではない。
    (2)
      甲2公報(特開平7-261763号)には，6サンプリング周期に対応する演算周期でフレームデータを読み出し，各ピークデータの周波数データで指示される周波数の基本波形データをその強度データで指示される強度で発生して，これらを加算合成することで一括して同フレームの2048サンプルの楽音波形データを演算生成する発明が記載されている。したがって，甲1発明に甲2公報記載の発明を適用することで，相違点1に係る本件発明の構成は，容易に想到し得る。
  2 相違点2について
    甲2公報には，6サンプリングタイミングごとにフレームデータを読み出し，【図6】に示す楽音波形データのエンベロープ特性に基づき，6サンプルごとに基本波を合成して楽音波形を得て，その間の5サンプルの楽音波形データは，直線補間によりこれを得るという発明が記載されている。また，エンベロープ特性曲線を折れ線で近似させることは，特開平2-179692号公報(甲4)等複数の公開特許公報に記載されるように，周知・慣用技術である。
    したがって，エンベロープ特性曲線を折れ線で近似させる上記の周知・慣用技術を斟酌し，甲2公報記載の発明を甲1発明に適用して，甲1発明の折れ線近似の単位を甲2公報記載の発明のように6サンプリング周期とすることは，当業者が容易に想到し得るのであって，折れ線による近似の単位を演算周期の単位とするという相違点2に係る本件発明の構成を想到することが容易ではないとした審決の判断は誤りである。
第4 被告の反論
  1 相違点1について
    本件発明の「複数の楽音波形サンプルを一括生成する」との構成は，従来技術の波形生成演算が1サンプリング周期ごとに1サンプルの波形データを生成演算するものであったのに対して，本件明細書の【図6】～【図8】に示すように，1回の割込み(インタラプト)により1チャンネルにつき複数(128)サンプルをまとめて生成するようにしたものである。
    楽音波形サンプル生成技術においては，所定の音の波形を生成する際に，サンプリング周期に対応して正確に1サンプルごとの波形データをリアルタイムに生成する必要があり，かつ，これを複数サンプルにわたって規則的に行う必要があった。このように，楽音波形サンプル生成技術には特有の性格があり，これが甲1発明のような従来の楽音波形サンプル生成技術を拘束し，甲1発明等の従来技術においてはオーバヘッドの問題を解決できないでいた。
    これに対して，原告主張のマルチタスク処理の効率化に関する技術的事項は，上記の楽音波形サンプル生成技術に特有の性格とは無関係であり，相違点1に係る本件発明の構成を開示し，又は示唆するものではない。したがって，本件発明の「一括生成」が，従来技術にマルチタスク処理の効率化に関する技術的事項を適用したにすぎない旨の原告の主張は誤りであるし，そのようなマルチタスク処理の効率化に関する技術的事項が知られていたとしても，これを楽音波形サンプル生成技術に適用しなければならない動機は存在しない。
    以上のとおり，相違点1に係る本件発明の構成は，当業者が容易に想到し得るものではない。
  2 相違点2について
    相違点2に係る本件発明の構成の「前記演算周期」は，相違点1に係る本件発明の構成の「複数のサンプリング周期に対応する演算周期」であって，「該演算周期に対応する期間に含まれる複数の楽音波形サンプル」を「一括生成」するための演算周期を指している。これに対し，甲2公報記載の発明における「6サンプリングタイミングごと」は，フレームデータを算出するための周期にすぎない。
    また，甲2公報(特開平7-261763号)記載の発明において，楽音信号合成の際の6サンプルごとの補間演算は，個々のサンプル点ごとのフレームデータを補間演算によって求める処理であり，エンベロープ値を補間するものではない。すなわち，甲2公報記載の発明は，ある楽音波形データを分析して，6サンプリング周期ごとに異なるフレームデータ(128個の周波数データと強度データからなる。)を得ておき，これを使用して楽音波形の合成を行う際に，不足している5サンプル分のフレームデータを補間演算によって補い，これによって得られたフレームデータを使用して，1サンプリングタイミングごとに，1サンプルずつ波形を合成するものである。また，フレームデータを補間演算によって補ったとしても，そのフレームデータによって合成される楽音波形サンプルの振幅は直線性を示さない。
    以上のとおりで，甲2公報には，エンベロープ特性を折れ線近似する技術的事項は開示されておらず，フレームデータの直線補間の結果として得られる楽音波形データも，折れ線近似されたものではないから，エンベロープ特性の一般的な折れ線近似技術が周知であったとしても，甲1発明に甲2公報記載の発明を適用して，相違点2に係る本件発明の構成とすることが，当業者にとって容易に想到し得たとはいえない。
第5 当裁判所の判断(相違点1，2に関する判断の当否について)
  1 本件発明について
    本件明細書(甲11)によれば，本件発明について次のとおり認められる。
    本件発明は，CPUやDSP(Digital Signal Processor)などのプログラマブルな演算処理装置を用いて，演算により楽音波形サンプルを生成する楽音生成方法に関するものである(段落【0001】)。従来技術では，サンプリング周期(DAC(Digital Analog Converter)における変換タイミング)ごとに演算生成した波形サンプルをDACに供給することが必要であるため，演算処理装置(CPU)の演算量が非常に大きく，発音可能チャンネル数を多くすることができないなどの問題があり(段落【0002】，【0003】，【0008】)，また，波形生成処理の一部であるエンベロープ計算についても，対数を用いる方法では加算演算後に変換演算が必要となり，乗算を用いる方法では乗算のための演算時間が長くなるなどの問題があった(段落【0004】～【0009】)。そこで，本件発明は，請求項1に記載された構成を採ることにより，少ない演算量でエンベロープの演算を行うことを可能とし，楽音波形生成に要するCPUの負荷を減少させるという効果を奏するものである(段落【0010】，【0011】，【0037】)。
  2 相違点1に関する判断の当否について
    (1)
      原告は，1サンプルずつ波形サンプルデータを演算生成する甲1発明に，甲13の1～6の各公報に開示された周知技術，すなわち，時分割マルチタスク処理においてタスクを連続して実行するという周知技術を適用することによって，容易に相違点1に係る本件発明の「一括生成」の構成に至ると主張する。
      しかしながら，甲1発明は，審決も認定するとおり，マイクロコンピュータによる演算によって，1サンプルずつ波形サンプルデータを生成する楽音波形生成方法であるところ，甲13の1～4の各公報には，いずれもCPU等におけるマルチタスク処理の効率化に関する一般的な技術的事項が開示されているにすぎず，甲13の5の公報に開示された技術的事項も，電流を検出して演算処理を行うという技術分野に関するものであって，甲1発明とは技術分野が異なる。また，甲13の6の公報には，そもそも，ある演算を複数まとめて処理する技術的事項が開示されているとは認められない。したがって，相違点1が原告主張のように実質的な相違点でないということができないのはもとより，当業者にとって，甲13の1～6の各公報に開示された技術的事項を甲1発明に適用し，相違点1に係る本件発明の構成とすることが容易であったということはできない。
    (2)
      原告は，甲2公報には，6サンプリング周期ごとに2048サンプルの楽音波形データを演算生成する発明が記載されていると主張する。
      しかしながら，甲2公報(特開平7-261763号)によれば，甲2発明について次のとおり認められる。
      元となる楽音波形データを，下記【図6】のように複数のフレームに分割，すなわち，2048サンプルを1単位のフレームとして，これを時系列に沿って6サンプリング周期ずつずらした複数のフレームに分割し(段落【0001】，【0011】，【図6】)，各フレームの楽音波形データを解析して，各フレームごとに128個ずつのピークデータ(周波数データ，強度データ)からなるフレームデータを得た上で(段落【0011】)，これらのフレームデータを用いて楽音信号を合成するものであって(段落【0019】)，合成の際に，6サンプリング周期ごとに上記フレームデータを読み出し，中間の5サンプリング周期については直線補間演算によりフレームデータを生成することで，1サンプリングタイミングごとにフレームデータを出力し(段落【0012】，【0018】，【図2】)，これに基づいて，1サンプリングタイミングごとに楽音波形データを合成する(段落【0019】，【図2】)，分析合成系の音源装置による(段落【0001】)楽音波形データの合成方法。
      【図6】1つの楽音波形をフレームに分割する方式を説明する図
      このように，甲2発明における「2048サンプル」は，楽音波形データを合成する際に使用するフレームデータを得るための分析対象であって，楽音波形データの合成自体は1サンプリング周期ごとに行われるものである。したがって，1サンプルずつ波形サンプルデータを生成する甲1発明に甲2発明を適用したとしても，複数のサンプリング周期ごとに楽音波形データを演算生成するという相違点1に係る本件発明の構成には至らないのであって，原告の主張は採用することができない。
  3 相違点2に関する判断の当否について
    上記2で説示したとおり，甲2発明は，1サンプリング周期ごとに楽音波形データを演算生成するものである。したがって，1サンプルずつ波形サンプルデータを生成する甲1発明に甲2発明を適用したとしても，「前記演算周期」すなわち複数のサンプリング周期を単位とする折れ線によってエンベロープ値を算出するという相違点2に係る本件発明の構成には至らないのであって，原告の主張は採用することができない。
第6 結論
  以上のとおりであるから，原告主張の取消事由は理由がない。
  よって，原告の請求を棄却することとして，主文のとおり判決する。


事件番号: 平成23年(行ケ)10293
裁判所: 知的財産高等裁判所
裁判所部名: 知的財産高等裁判所第2部
裁判年月日: 2012-06-27
権利種別: 特許権
事件種別: 審決取消訴訟
判例ID: 082405
知財高裁判例ID: 2994
